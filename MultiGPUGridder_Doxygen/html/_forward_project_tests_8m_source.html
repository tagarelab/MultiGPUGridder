<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Multi-GPU Gridding: Tests/ForwardProjectTests.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Multi-GPU Gridding
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_33c78a012c8d08979f57a54a07694c46.html">Tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ForwardProjectTests.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_forward_project_tests_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;classdef ForwardProjectTests &lt; matlab.unittest.TestCase</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    % SolverTest tests solutions to the forward project CUDA <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    % Class variables</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    properties (TestParameter)  </div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        %Initialize parameters       </div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        type = {<span class="stringliteral">&#39;uint16&#39;</span>};</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        % Parameters <span class="keywordflow">for</span> running the CUDA kernels</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        GPU_Device = {...</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            0}</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;%         3,...</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;%             [2,0], ...</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;%             [3,2,1,0]};</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        </div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        <a class="code" href="_timing_test_script_8m.html#af8cc49a3e450b2b612ce263388cf142b">nStreams</a> = {1,32,64};</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        </div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        % Parameters <span class="keywordflow">for</span> creating the <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a> and coordinate axes</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        VolumeSize = {64};       </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <a class="code" href="_timing_test_script_8m.html#a803374cb17b07219f594e5e2d0e2f197">n1_axes</a> = {10},</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <a class="code" href="_timing_test_script_8m.html#a152529a768f4740cb88aeffe7ea09134">n2_axes</a> = {50};</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    </div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    methods (Test)</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <a class="code" href="get_sizes_8m.html#af5c17788289fd88c5ce8d031980f35c4">function</a> testForwardProjection_FFTOnGPU(testCase, GPU_Device, VolumeSize, <a class="code" href="_timing_test_script_8m.html#af8cc49a3e450b2b612ce263388cf142b">nStreams</a>, <a class="code" href="_timing_test_script_8m.html#a803374cb17b07219f594e5e2d0e2f197">n1_axes</a>, <a class="code" href="_timing_test_script_8m.html#a152529a768f4740cb88aeffe7ea09134">n2_axes</a>)</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            % Create the fuzzy sphere <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            <a class="code" href="_c_a_s_from_vol___gridder_8m.html#a79a5851e1c52a7ae6219d57b6af10344">origSize</a>=VolumeSize;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            <a class="code" href="_c_a_s_from_vol___gridder_8m.html#af1d897e28e648aec91690a6ba1eb1f36">origCenter</a>=<a class="code" href="_c_a_s_from_vol___gridder_8m.html#a79a5851e1c52a7ae6219d57b6af10344">origSize</a>/2+1;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <a class="code" href="_c_a_s_to_complex_test_8m.html#a6d9118f5c2ef537242b2308e1dad42f7">Volume</a> = fuzzymask(origSize,3,origSize*.25,2,<a class="code" href="_c_a_s_from_vol___gridder_8m.html#af1d897e28e648aec91690a6ba1eb1f36">origCenter</a>*[1 1 1]);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            </div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            % Define the projection directions</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#afeee088a42e300511137ea0a19154d47">coordAxes</a> = create_uniform_axes(n1_axes,<a class="code" href="_timing_test_script_8m.html#a152529a768f4740cb88aeffe7ea09134">n2_axes</a>,0,10);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            % Create the <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a> <span class="keywordtype">object</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <a class="code" href="_timing_test_script_8m.html#ada8a976a34768237a2ce9b4c08e67608">RunFFTOnGPU</a> = true;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <a class="code" href="_timing_test_script_8m.html#a3eeac03a9d930969ad2e15361676577b">interpFactor</a> = 2;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a> = MultiGPUGridder_Matlab_Class(VolumeSize, n1_axes * n2_axes, <a class="code" href="_timing_test_script_8m.html#a3eeac03a9d930969ad2e15361676577b">interpFactor</a>, <a class="code" href="_timing_test_script_8m.html#ada8a976a34768237a2ce9b4c08e67608">RunFFTOnGPU</a>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            </div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            % Set the number of CUDA streams to use</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.nStreams = nStreams;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            % Set the GPU device to use</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <a class="code" href="get__axes__from__n__rot_8m.html#a98431243eb755eab1bb1b077ce199d22">if</a> any(GPU_Device &gt; gpuDeviceCount-1) % Check that the computer has all the GPUs <a class="code" href="vol_from_c_a_s___gridder_8m.html#a624b48103a930ce475060f7d7040d128">available</a></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <a class="code" href="_multi_gridder_timing_test_8m.html#a18ef5b365666a53815a28a49c81cbea9">return</a></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.GPUs = int32(GPU_Device);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            </div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            % Set the <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.<a class="code" href="_multi_gridder_timing_test_8m.html#ac536eca344bc24ce89ec1713974daab4">setVolume</a>(<a class="code" href="_c_a_s_to_complex_test_8m.html#a6d9118f5c2ef537242b2308e1dad42f7">Volume</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            % Run the forward projection</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#a897b5234b10d5d8e7c453b6f5f76f884">images</a> = <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.forwardProject(<a class="code" href="_multi_gridder_timing_test_8m.html#afeee088a42e300511137ea0a19154d47">coordAxes</a>);    </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            % Create <a class="code" href="get__axes__from__n__rot_8m.html#a74946d12fa08ad0e91b5f5dde42e4d5b">a</a> ground truth by simply summing the MRI <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a> in the 3 directions</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            GT_Projection = squeeze(sum(Volume,3));     </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            % Calculate the mean difference between the ground truth and the projected <a class="code" href="_multi_gridder_timing_test_8m.html#a897b5234b10d5d8e7c453b6f5f76f884">images</a></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            MeanDifference = [];</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            for <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 1:<a class="code" href="get_sizes_8m.html#a01e518957c8d45feafab1b7e327f07bf">size</a>(<a class="code" href="_multi_gridder_timing_test_8m.html#a897b5234b10d5d8e7c453b6f5f76f884">images</a>,3)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                temp_images = images(:,:,<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                MeanDifference(i) = mean(temp_images(:) - GT_Projection(:));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            </div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            % Verify that the projections are close to the ground truth</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            testCase.verifyLessThanOrEqual(max(<a class="code" href="grid_lib_kaiser_8m.html#a7daa02214fe48c8a2192f1c5ef11b804">abs</a>(MeanDifference(:))), 1);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;       <a class="code" href="get_sizes_8m.html#af5c17788289fd88c5ce8d031980f35c4">function</a> testForwardProjection_FFTOnCPU(testCase, GPU_Device, VolumeSize, nStreams, n1_axes, n2_axes)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            % Create the fuzzy sphere <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            origSize=VolumeSize;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            origCenter=origSize/2+1;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            Volume = fuzzymask(origSize,3,origSize*.25,2,origCenter*[1 1 1]);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            </div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            % Define the projection directions</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            coordAxes = create_uniform_axes(n1_axes,n2_axes,0,10);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            % Create the <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a> <span class="keywordtype">object</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            RunFFTOnGPU = false;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            interpFactor = 2;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a> = MultiGPUGridder_Matlab_Class(VolumeSize, n1_axes * n2_axes, interpFactor, RunFFTOnGPU);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            % Set the number of CUDA streams to use</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.nStreams = nStreams;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            </div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            % Set the GPU device to use</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="get__axes__from__n__rot_8m.html#a98431243eb755eab1bb1b077ce199d22">if</a> any(GPU_Device &gt; gpuDeviceCount-1) % Check that the computer has all the GPUs <a class="code" href="vol_from_c_a_s___gridder_8m.html#a624b48103a930ce475060f7d7040d128">available</a></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <a class="code" href="_multi_gridder_timing_test_8m.html#a18ef5b365666a53815a28a49c81cbea9">return</a></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.GPUs = int32(GPU_Device);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            </div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            % Set the <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.<a class="code" href="_multi_gridder_timing_test_8m.html#ac536eca344bc24ce89ec1713974daab4">setVolume</a>(Volume);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            % Run the forward projection</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            images = <a class="code" href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a>.forwardProject(coordAxes);    </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            % Create <a class="code" href="get__axes__from__n__rot_8m.html#a74946d12fa08ad0e91b5f5dde42e4d5b">a</a> ground truth by simply summing the MRI <a class="code" href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a> in the 3 directions</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            GT_Projection = squeeze(sum(Volume,3));     </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            % Calculate the mean difference between the ground truth and the projected images</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            MeanDifference = [];</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            for i = 1:<a class="code" href="get_sizes_8m.html#a01e518957c8d45feafab1b7e327f07bf">size</a>(images,3)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                temp_images = images(:,:,i);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                MeanDifference(i) = mean(temp_images(:) - GT_Projection(:));</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            % Verify that the projections are close to the ground truth</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            testCase.verifyLessThanOrEqual(max(<a class="code" href="grid_lib_kaiser_8m.html#a7daa02214fe48c8a2192f1c5ef11b804">abs</a>(MeanDifference(:))), 2);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<a class="code" href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="ttc" id="_timing_test_script_8m_html_ada8a976a34768237a2ce9b4c08e67608"><div class="ttname"><a href="_timing_test_script_8m.html#ada8a976a34768237a2ce9b4c08e67608">RunFFTOnGPU</a></div><div class="ttdeci">RunFFTOnGPU</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00019">TimingTestScript.m:19</a></div></div>
<div class="ttc" id="get_sizes_8m_html_a01e518957c8d45feafab1b7e327f07bf"><div class="ttname"><a href="get_sizes_8m.html#a01e518957c8d45feafab1b7e327f07bf">size</a></div><div class="ttdeci">InterpVol interp size</div><div class="ttdef"><b>Definition:</b> <a href="get_sizes_8m_source.html#l00007">getSizes.m:7</a></div></div>
<div class="ttc" id="_c_a_s_to_complex_test_8m_html_a8f5031e978aa276850b726c287683d70"><div class="ttname"><a href="_c_a_s_to_complex_test_8m.html#a8f5031e978aa276850b726c287683d70">volume</a></div><div class="ttdeci">Calculate the ground truth complex array from the CAS volume[s1, s2, s3]</div><div class="ttdef"><b>Definition:</b> <a href="_c_a_s_to_complex_test_8m_source.html#l00015">CASToComplexTest.m:15</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a803374cb17b07219f594e5e2d0e2f197"><div class="ttname"><a href="_timing_test_script_8m.html#a803374cb17b07219f594e5e2d0e2f197">n1_axes</a></div><div class="ttdeci">n1_axes</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00014">TimingTestScript.m:14</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_af8cc49a3e450b2b612ce263388cf142b"><div class="ttname"><a href="_timing_test_script_8m.html#af8cc49a3e450b2b612ce263388cf142b">nStreams</a></div><div class="ttdeci">nStreams</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00016">TimingTestScript.m:16</a></div></div>
<div class="ttc" id="get__axes__from__n__rot_8m_html_a74946d12fa08ad0e91b5f5dde42e4d5b"><div class="ttname"><a href="get__axes__from__n__rot_8m.html#a74946d12fa08ad0e91b5f5dde42e4d5b">a</a></div><div class="ttdeci">The z axis Check if the proj direction is z a</div><div class="ttdef"><b>Definition:</b> <a href="get__axes__from__n__rot_8m_source.html#l00011">get_axes_from_n_rot.m:11</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_adf4d1866ff60e0a0d4a179ec724bc792"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#adf4d1866ff60e0a0d4a179ec724bc792">gridder</a></div><div class="ttdeci">Create the gridder object gridder</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00014">MultiGridderTimingTest.m:14</a></div></div>
<div class="ttc" id="_c_a_s_to_complex_test_8m_html_a6d9118f5c2ef537242b2308e1dad42f7"><div class="ttname"><a href="_c_a_s_to_complex_test_8m.html#a6d9118f5c2ef537242b2308e1dad42f7">Volume</a></div><div class="ttdeci">Volume</div><div class="ttdef"><b>Definition:</b> <a href="_c_a_s_to_complex_test_8m_source.html#l00005">CASToComplexTest.m:5</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_a897b5234b10d5d8e7c453b6f5f76f884"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#a897b5234b10d5d8e7c453b6f5f76f884">images</a></div><div class="ttdeci">Initialize the memory allocation by running the forward projection once images</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00024">MultiGridderTimingTest.m:24</a></div></div>
<div class="ttc" id="get_sizes_8m_html_af5c17788289fd88c5ce8d031980f35c4"><div class="ttname"><a href="get_sizes_8m.html#af5c17788289fd88c5ce8d031980f35c4">function</a></div><div class="ttdeci">function[orig, interp, CAS]</div><div class="ttdef"><b>Definition:</b> <a href="get_sizes_8m_source.html#l00001">getSizes.m:1</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="_c_a_s_from_vol___gridder_8m_html_af1d897e28e648aec91690a6ba1eb1f36"><div class="ttname"><a href="_c_a_s_from_vol___gridder_8m.html#af1d897e28e648aec91690a6ba1eb1f36">origCenter</a></div><div class="ttdeci">origCenter</div><div class="ttdef"><b>Definition:</b> <a href="_c_a_s_from_vol___gridder_8m_source.html#l00027">CASFromVol_Gridder.m:27</a></div></div>
<div class="ttc" id="grid_lib_kaiser_8m_html_a7daa02214fe48c8a2192f1c5ef11b804"><div class="ttname"><a href="grid_lib_kaiser_8m.html#a7daa02214fe48c8a2192f1c5ef11b804">abs</a></div><div class="ttdeci">if abs(q)&gt;n w(i)=0</div></div>
<div class="ttc" id="vol_from_c_a_s___gridder_8m_html_a624b48103a930ce475060f7d7040d128"><div class="ttname"><a href="vol_from_c_a_s___gridder_8m.html#a624b48103a930ce475060f7d7040d128">available</a></div><div class="ttdeci">function origSize of the volume and the kernel half width for precompensation Optional inputs are interpolation factor and padwidth They have default values of and resp The output is single precision interpolated and the preComp function used in precompensation Check if optional inputs are available</div><div class="ttdef"><b>Definition:</b> <a href="vol_from_c_a_s___gridder_8m_source.html#l00001">volFromCAS_Gridder.m:1</a></div></div>
<div class="ttc" id="get__axes__from__n__rot_8m_html_a98431243eb755eab1bb1b077ce199d22"><div class="ttname"><a href="get__axes__from__n__rot_8m.html#a98431243eb755eab1bb1b077ce199d22">if</a></div><div class="ttdeci">if(sqrt(sum(a.*a))&lt; 0.0001)%Projection direction is z T1</div></div>
<div class="ttc" id="_timing_test_script_8m_html_a3eeac03a9d930969ad2e15361676577b"><div class="ttname"><a href="_timing_test_script_8m.html#a3eeac03a9d930969ad2e15361676577b">interpFactor</a></div><div class="ttdeci">interpFactor</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00012">TimingTestScript.m:12</a></div></div>
<div class="ttc" id="grid_lib_kaiser_8m_html_afb358f48b1646c750fb9da6c6585be2b"><div class="ttname"><a href="grid_lib_kaiser_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a></div><div class="ttdeci">end</div><div class="ttdef"><b>Definition:</b> <a href="grid_lib_kaiser_8m_source.html#l00014">gridLibKaiser.m:14</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_afeee088a42e300511137ea0a19154d47"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#afeee088a42e300511137ea0a19154d47">coordAxes</a></div><div class="ttdeci">Define the projection directions coordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00011">MultiGridderTimingTest.m:11</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_a18ef5b365666a53815a28a49c81cbea9"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#a18ef5b365666a53815a28a49c81cbea9">return</a></div><div class="ttdeci">clear gridder return</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00040">MultiGridderTimingTest.m:40</a></div></div>
<div class="ttc" id="_c_a_s_from_vol___gridder_8m_html_a79a5851e1c52a7ae6219d57b6af10344"><div class="ttname"><a href="_c_a_s_from_vol___gridder_8m.html#a79a5851e1c52a7ae6219d57b6af10344">origSize</a></div><div class="ttdeci">end Calculate the center and half width of the input volume origSize</div><div class="ttdef"><b>Definition:</b> <a href="_c_a_s_from_vol___gridder_8m_source.html#l00026">CASFromVol_Gridder.m:26</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a152529a768f4740cb88aeffe7ea09134"><div class="ttname"><a href="_timing_test_script_8m.html#a152529a768f4740cb88aeffe7ea09134">n2_axes</a></div><div class="ttdeci">n2_axes</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00015">TimingTestScript.m:15</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_ac536eca344bc24ce89ec1713974daab4"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#ac536eca344bc24ce89ec1713974daab4">setVolume</a></div><div class="ttdeci">Set the volume gridder setVolume(MRI_volume)</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 2 2020 09:57:26 for Multi-GPU Gridding by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
