<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Multi-GPU Gridding: gpuGridder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Multi-GPU Gridding
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classgpu_gridder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">gpuGridder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class for gridding on the GPU.  
 <a href="classgpu_gridder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for gpuGridder:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder__inherit__graph.png" border="0" usemap="#gpu_gridder_inherit__map" alt="Inheritance graph"/></div>
<map name="gpu_gridder_inherit__map" id="gpu_gridder_inherit__map">
<area shape="rect" id="node2" href="class_abstract_gridder.html" title="A class for the gridder interface. " alt="" coords="5,5,119,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for gpuGridder:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder__coll__graph.png" border="0" usemap="#gpu_gridder_coll__map" alt="Collaboration graph"/></div>
<map name="gpu_gridder_coll__map" id="gpu_gridder_coll__map">
<area shape="rect" id="node2" href="class_abstract_gridder.html" title="A class for the gridder interface. " alt="" coords="278,319,391,345"/>
<area shape="rect" id="node6" href="class_host_memory.html" title="HostMemory\&lt; float \&gt;" alt="" coords="144,140,291,167"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa2a18f9abf19e19601e1cfbacf37c25b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#aa2a18f9abf19e19601e1cfbacf37c25b">gpuGridder</a> (int VolumeSize, int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, int <a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>, int RunFFTOnDevice, int GPU_Device, bool <a class="el" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a>=false)</td></tr>
<tr class="separator:aa2a18f9abf19e19601e1cfbacf37c25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a8540b918f695aaf5649dc58a86d4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a76a8540b918f695aaf5649dc58a86d4f">~gpuGridder</a> ()</td></tr>
<tr class="separator:a76a8540b918f695aaf5649dc58a86d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a4eb3efb6fdc4457a8048aa1a89334a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a3a4eb3efb6fdc4457a8048aa1a89334a">Allocate</a> ()</td></tr>
<tr class="memdesc:a3a4eb3efb6fdc4457a8048aa1a89334a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate required GPU memory.  <a href="#a3a4eb3efb6fdc4457a8048aa1a89334a">More...</a><br /></td></tr>
<tr class="separator:a3a4eb3efb6fdc4457a8048aa1a89334a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11f5283443a948896f1c48b6dd7c577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#ae11f5283443a948896f1c48b6dd7c577">ForwardProject</a> (int AxesOffset, int nAxesToProcess)</td></tr>
<tr class="separator:ae11f5283443a948896f1c48b6dd7c577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3740086e3f9cb6558e20191122dc11c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#af3740086e3f9cb6558e20191122dc11c">BackProject</a> (int AxesOffset, int nAxesToProcess)</td></tr>
<tr class="separator:af3740086e3f9cb6558e20191122dc11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012d5a68e82cfd2b1d845c98beca42ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a012d5a68e82cfd2b1d845c98beca42ca">SetNumStreamsFP</a> (int nStreamsFP)</td></tr>
<tr class="memdesc:a012d5a68e82cfd2b1d845c98beca42ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of CUDA streams to use for the forward projection kernel.  <a href="#a012d5a68e82cfd2b1d845c98beca42ca">More...</a><br /></td></tr>
<tr class="separator:a012d5a68e82cfd2b1d845c98beca42ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798cffcd48773dba66a89d8cc3718421"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421">SetNumStreamsBP</a> (int nStreamsBP)</td></tr>
<tr class="memdesc:a798cffcd48773dba66a89d8cc3718421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of CUDA streams to use for the back projection kernel.  <a href="#a798cffcd48773dba66a89d8cc3718421">More...</a><br /></td></tr>
<tr class="separator:a798cffcd48773dba66a89d8cc3718421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af960a33291f2c084ecfb1eb8ca4702d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#af960a33291f2c084ecfb1eb8ca4702d6">SetGPU</a> (int GPU_Device)</td></tr>
<tr class="separator:af960a33291f2c084ecfb1eb8ca4702d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2daeb6521f3235460e15b19e440df458"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a2daeb6521f3235460e15b19e440df458">GetCASVolumeFromDevice</a> ()</td></tr>
<tr class="memdesc:a2daeb6521f3235460e15b19e440df458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the GPU volume array back to the host (i.e. CPU) and return the pointer to the new host array.  <a href="#a2daeb6521f3235460e15b19e440df458">More...</a><br /></td></tr>
<tr class="separator:a2daeb6521f3235460e15b19e440df458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b28906d7236f68e1011c60315ce4157"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a2b28906d7236f68e1011c60315ce4157">GetCASVolumePtr</a> ()</td></tr>
<tr class="memdesc:a2b28906d7236f68e1011c60315ce4157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the volume array on the GPU.  <a href="#a2b28906d7236f68e1011c60315ce4157">More...</a><br /></td></tr>
<tr class="separator:a2b28906d7236f68e1011c60315ce4157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457eb442edc4dcf67670f7af4b7d94b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a457eb442edc4dcf67670f7af4b7d94b0">CopyVolumeToHost</a> ()</td></tr>
<tr class="memdesc:a457eb442edc4dcf67670f7af4b7d94b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the volume array from the GPU back to the pinned host (i.e. CPU) memory. This is used to return the output of the back projection.  <a href="#a457eb442edc4dcf67670f7af4b7d94b0">More...</a><br /></td></tr>
<tr class="separator:a457eb442edc4dcf67670f7af4b7d94b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b4533f6adf806d9d7bbfff167f1a74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a36b4533f6adf806d9d7bbfff167f1a74">CopyCASVolumeToHost</a> ()</td></tr>
<tr class="memdesc:a36b4533f6adf806d9d7bbfff167f1a74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the CAS volume array from the GPU back to the pinned host (i.e. CPU) memory. This is needed if running the Fourier transform on the CPU (such as within Matlab or Python).  <a href="#a36b4533f6adf806d9d7bbfff167f1a74">More...</a><br /></td></tr>
<tr class="separator:a36b4533f6adf806d9d7bbfff167f1a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4e7f3ef31f51e504cf20d5c3c1b05a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a9e4e7f3ef31f51e504cf20d5c3c1b05a">ReconstructVolume</a> ()</td></tr>
<tr class="separator:a9e4e7f3ef31f51e504cf20d5c3c1b05a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2c3dce164f6b787104a96d0b6ca30c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#aba2c3dce164f6b787104a96d0b6ca30c">CASVolumeToVolume</a> ()</td></tr>
<tr class="memdesc:aba2c3dce164f6b787104a96d0b6ca30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the CASVolume to volume by running an inverse FFT. This function does not normalize using the plane density.  <a href="#aba2c3dce164f6b787104a96d0b6ca30c">More...</a><br /></td></tr>
<tr class="separator:aba2c3dce164f6b787104a96d0b6ca30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:a362c95f254fbcb0460ff9325d760e5db inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder</a> (int VolumeSize, int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, int <a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>)</td></tr>
<tr class="separator:a362c95f254fbcb0460ff9325d760e5db inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc04d5f961454e5eb64ca2388a09a1de inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#afc04d5f961454e5eb64ca2388a09a1de">~AbstractGridder</a> ()</td></tr>
<tr class="separator:afc04d5f961454e5eb64ca2388a09a1de inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8aafbe850ffeb16208f656aa282a6882">ForwardProject</a> ()</td></tr>
<tr class="memdesc:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the forward projection and return the projection images.  <a href="#a8aafbe850ffeb16208f656aa282a6882">More...</a><br /></td></tr>
<tr class="separator:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a6d61e635d6cf3487a806e8de71449a8c">BackProject</a> ()</td></tr>
<tr class="memdesc:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the back projection and return the volume.  <a href="#a6d61e635d6cf3487a806e8de71449a8c">More...</a><br /></td></tr>
<tr class="separator:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ae62be08b3628ab484cb8e352cbabb87c">ResetVolume</a> ()</td></tr>
<tr class="memdesc:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the volume to all zeros.  <a href="#ae62be08b3628ab484cb8e352cbabb87c">More...</a><br /></td></tr>
<tr class="separator:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21988d979f448e243376d17b8e964a5a inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a21988d979f448e243376d17b8e964a5a">SetVolume</a> (float *<a class="el" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>, int *VolumeSize)</td></tr>
<tr class="separator:a21988d979f448e243376d17b8e964a5a inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1dbc21ea250e2d305badf62783da168 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ac1dbc21ea250e2d305badf62783da168">SetKerBesselVector</a> (float *<a class="el" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>, int *ArraySize)</td></tr>
<tr class="separator:ac1dbc21ea250e2d305badf62783da168 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188e9a4b7ea5dbd24d2ae86927b4aaf5 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a188e9a4b7ea5dbd24d2ae86927b4aaf5">SetImages</a> (float *<a class="el" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>, int *ArraySize)</td></tr>
<tr class="separator:a188e9a4b7ea5dbd24d2ae86927b4aaf5 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762bd124debb298a1e4eec68ede4e16e inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a762bd124debb298a1e4eec68ede4e16e">SetCoordAxes</a> (float *<a class="el" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>, int *ArraySize)</td></tr>
<tr class="separator:a762bd124debb298a1e4eec68ede4e16e inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc7df557de1ac1f80fcf5c55517f6af4 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#abc7df557de1ac1f80fcf5c55517f6af4">SetCASVolume</a> (float *<a class="el" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>, int *ArraySize)</td></tr>
<tr class="separator:abc7df557de1ac1f80fcf5c55517f6af4 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace00df1e6c449fef7ca1b46d29de5cdc inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ace00df1e6c449fef7ca1b46d29de5cdc">SetCASImages</a> (float *<a class="el" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>, int *ArraySize)</td></tr>
<tr class="separator:ace00df1e6c449fef7ca1b46d29de5cdc inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0c0a50459b15bad65a2dcab5484cda inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acf0c0a50459b15bad65a2dcab5484cda">SetMaxAxesToAllocate</a> (int <a class="el" href="class_abstract_gridder.html#a3afdf9b475aab966b2562a4098a6111f">MaxAxesToAllocate</a>)</td></tr>
<tr class="separator:acf0c0a50459b15bad65a2dcab5484cda inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#adbcd0d2e0a1300094d7ee1e20173d374">SetNumAxes</a> (int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>)</td></tr>
<tr class="memdesc:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of coordinate axes to be used in the forward and back projection.  <a href="#adbcd0d2e0a1300094d7ee1e20173d374">More...</a><br /></td></tr>
<tr class="separator:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acb53ec5dca88ced81f16e482a2d01bc5">SetInterpFactor</a> (float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>)</td></tr>
<tr class="memdesc:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interpolation factor for upsampling the volume for forward and inverse Fourier transform. Default is 2.  <a href="#acb53ec5dca88ced81f16e482a2d01bc5">More...</a><br /></td></tr>
<tr class="separator:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aec1dc054749090bc3f07c6a8112064d8">SetMaskRadius</a> (float <a class="el" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>)</td></tr>
<tr class="memdesc:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mask radius for forward and back projection. The default value is the volume size times interpolation factor divided by two minus one.  <a href="#aec1dc054749090bc3f07c6a8112064d8">More...</a><br /></td></tr>
<tr class="separator:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a830de77763928fa082f60eb324ea1336">GetNumAxes</a> ()</td></tr>
<tr class="memdesc:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of corrdinate axes.  <a href="#a830de77763928fa082f60eb324ea1336">More...</a><br /></td></tr>
<tr class="separator:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a59364c30c23b2b9764d219087a54577a">GetVolume</a> ()</td></tr>
<tr class="memdesc:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the volume.  <a href="#a59364c30c23b2b9764d219087a54577a">More...</a><br /></td></tr>
<tr class="separator:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e12d39638a84317d189f19f9ecd007 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a02e12d39638a84317d189f19f9ecd007">GetVolumeHostMemory</a> ()</td></tr>
<tr class="separator:a02e12d39638a84317d189f19f9ecd007 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8a2faa19d66c5119d3e174aeb588f0d2">GetCASVolume</a> ()</td></tr>
<tr class="memdesc:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the CAS volume.  <a href="#a8a2faa19d66c5119d3e174aeb588f0d2">More...</a><br /></td></tr>
<tr class="separator:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8beaeeccb10c84d0f9c42749db30ab04">GetMaskRadius</a> ()</td></tr>
<tr class="memdesc:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the mask radius parameter.  <a href="#a8beaeeccb10c84d0f9c42749db30ab04">More...</a><br /></td></tr>
<tr class="separator:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a21d66a508db669993dc47901b05a6f9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#a21d66a508db669993dc47901b05a6f9b">ImgsToCASImgs</a> (cudaStream_t &amp;stream, float *CASImgs, cufftComplex *CASImgsComplex, float *Imgs, int numImgs)</td></tr>
<tr class="memdesc:a21d66a508db669993dc47901b05a6f9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert projection images to CAS images by running a forward FFT.  <a href="#a21d66a508db669993dc47901b05a6f9b">More...</a><br /></td></tr>
<tr class="separator:a21d66a508db669993dc47901b05a6f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:abe25d8b6c259f2bc895b1c51888b69f3 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#abe25d8b6c259f2bc895b1c51888b69f3">VolumeToCAS</a> ()</td></tr>
<tr class="separator:abe25d8b6c259f2bc895b1c51888b69f3 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8a70e8731e7f4973c541c7f978b4d5 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#adb8a70e8731e7f4973c541c7f978b4d5">CASToVolume</a> ()</td></tr>
<tr class="separator:adb8a70e8731e7f4973c541c7f978b4d5 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ec31b54d35759d5a6c58164f7e96b3 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a39ec31b54d35759d5a6c58164f7e96b3">SetAxes</a> (float *<a class="el" href="_multi_gridder_timing_test_8m.html#afeee088a42e300511137ea0a19154d47">coordAxes</a>, int *axesSize)</td></tr>
<tr class="separator:a39ec31b54d35759d5a6c58164f7e96b3 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69911a325fdba4a15c42c3bf61d745d4 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a69911a325fdba4a15c42c3bf61d745d4">FreeMemory</a> ()</td></tr>
<tr class="separator:a69911a325fdba4a15c42c3bf61d745d4 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aeff5f79de9565df5eee66bdb362f03b6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a></td></tr>
<tr class="separator:aeff5f79de9565df5eee66bdb362f03b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:ad61eca9a9f8b29a703690c8bd4020627 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">ErrorFlag</a></td></tr>
<tr class="separator:ad61eca9a9f8b29a703690c8bd4020627 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5020402671f5feba0b423ff27756236f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a5020402671f5feba0b423ff27756236f">ApplyCTFs</a></td></tr>
<tr class="separator:a5020402671f5feba0b423ff27756236f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d76fbca301dc973de88120f4468731 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a></td></tr>
<tr class="separator:ac5d76fbca301dc973de88120f4468731 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ced2e5b29dc7f66899e030e6f073c6 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a></td></tr>
<tr class="separator:aa8ced2e5b29dc7f66899e030e6f073c6 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d47b32a562dd9cfd841f1cef1ba72d inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a></td></tr>
<tr class="separator:a74d47b32a562dd9cfd841f1cef1ba72d inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afdf9b475aab966b2562a4098a6111f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a3afdf9b475aab966b2562a4098a6111f">MaxAxesToAllocate</a></td></tr>
<tr class="separator:a3afdf9b475aab966b2562a4098a6111f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0c6d2e4e86ae21425a2ab9a009654f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a0e0c6d2e4e86ae21425a2ab9a009654f">kerSize</a></td></tr>
<tr class="separator:a0e0c6d2e4e86ae21425a2ab9a009654f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cf97f19b7db1f9525461fefc0bbc88 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">kerHWidth</a></td></tr>
<tr class="separator:a81cf97f19b7db1f9525461fefc0bbc88 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0eb613edb0b7d65b2aa1925baa1eca inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a></td></tr>
<tr class="separator:acf0eb613edb0b7d65b2aa1925baa1eca inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:a8e761d95420dbaa1d500e0a09cc5fa9e inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a></td></tr>
<tr class="separator:a8e761d95420dbaa1d500e0a09cc5fa9e inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b12a99ab909cec92ada5f815156de83 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a></td></tr>
<tr class="separator:a0b12a99ab909cec92ada5f815156de83 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3cafbe24ff324215c4cdae5aefa8ca inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a></td></tr>
<tr class="separator:aea3cafbe24ff324215c4cdae5aefa8ca inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee11c5fca119f5898423c8ed7becf07c inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a></td></tr>
<tr class="separator:aee11c5fca119f5898423c8ed7becf07c inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626a7d3e12f4809781b6d52ff5e1a2d5 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a></td></tr>
<tr class="separator:a626a7d3e12f4809781b6d52ff5e1a2d5 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18568b39490b8dcd32f5f190d4ded554 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a></td></tr>
<tr class="separator:a18568b39490b8dcd32f5f190d4ded554 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for gridding on the GPU. </p>
<p>This class is used for forward and back projection of a volume on a single NVIDIA GPU. The <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> inherits from the AbstractClass which is used for setting and getting the host (i.e. CPU) memory pointers to the volume, coordinate axes vector, etc, and for setting various parameters such as the interpolation factor.</p>
<p>The <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> estimates the number of coordinate axes which the GPU has available memory for. The GPU memory has type <a class="el" href="class_device_memory.html" title="A class for allocating device (i.e. GPU) memory. ">DeviceMemory</a> which remembers various required information about the GPU array.</p>
<p>The ForwardProject and BackProject functions both take the same inputs: AxesOffset and nAxesToProcess which represent the offset (in number of coordinate axes) of the host (i.e. CPU) coordinate axes array to start the forward or back projection on. The nAxesToProcess represents how many coordinate axes this gridder should process. For example, if the host memory has 1,000 coordinate axes and we wanted the <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> to process axes 500 to 700, then simply set the AxesOffset to 500 and the nAxesToProcess to 200.</p>
<p>The <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> also provides functions for executing the forward and inverse Fourier transforms on the GPU (see the CASVolumeToVolume and ImgsToCASImgs functions). </p>

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00067">67</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa2a18f9abf19e19601e1cfbacf37c25b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gpuGridder::gpuGridder </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>VolumeSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numCoordAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>interpFactor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>extraPadding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>RunFFTOnDevice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>GPU_Device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00072">72</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                                                                                                                                 : <a class="code" href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder</a>(VolumeSize, <a class="code" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, <a class="code" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, <a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">// Set default values</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        this-&gt;VolumeToCASVolumeFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        this-&gt;GPUArraysAllocatedFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        this-&gt;nStreamsFP = 1;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        this-&gt;nStreamsBP = 1;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        this-&gt;VolumeSize = VolumeSize;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        this-&gt;KB_Table_Size = 501;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        this-&gt;RunFFTOnDevice = RunFFTOnDevice;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        this-&gt;<a class="code" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a> = this-&gt;VolumeSize * this-&gt;<a class="code" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a> / 2 - 1;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> = <a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// Set the GPU device</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        this-&gt;<a class="code" href="classgpu_gridder.html#af960a33291f2c084ecfb1eb8ca4702d6">SetGPU</a>(GPU_Device);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">ErrorFlag</a> == 1)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to Initialize gpuGridder. Please check the GPU device number.&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    };</div><div class="ttc" id="class_abstract_gridder_html_acf0eb613edb0b7d65b2aa1925baa1eca"><div class="ttname"><a href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">AbstractGridder::numCoordAxes</a></div><div class="ttdeci">int numCoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00141">AbstractGridder.h:141</a></div></div>
<div class="ttc" id="classgpu_gridder_html_af960a33291f2c084ecfb1eb8ca4702d6"><div class="ttname"><a href="classgpu_gridder.html#af960a33291f2c084ecfb1eb8ca4702d6">gpuGridder::SetGPU</a></div><div class="ttdeci">void SetGPU(int GPU_Device)</div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8cpp_source.html#l00033">gpuGridder.cpp:33</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ac5d76fbca301dc973de88120f4468731"><div class="ttname"><a href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">AbstractGridder::maskRadius</a></div><div class="ttdeci">float maskRadius</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00122">AbstractGridder.h:122</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ad61eca9a9f8b29a703690c8bd4020627"><div class="ttname"><a href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">AbstractGridder::ErrorFlag</a></div><div class="ttdeci">bool ErrorFlag</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00116">AbstractGridder.h:116</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a74d47b32a562dd9cfd841f1cef1ba72d"><div class="ttname"><a href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">AbstractGridder::extraPadding</a></div><div class="ttdeci">int extraPadding</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00128">AbstractGridder.h:128</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aa8ced2e5b29dc7f66899e030e6f073c6"><div class="ttname"><a href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">AbstractGridder::interpFactor</a></div><div class="ttdeci">float interpFactor</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00125">AbstractGridder.h:125</a></div></div>
<div class="ttc" id="classgpu_gridder_html_aeff5f79de9565df5eee66bdb362f03b6"><div class="ttname"><a href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">gpuGridder::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8h_source.html#l00223">gpuGridder.h:223</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a362c95f254fbcb0460ff9325d760e5db"><div class="ttname"><a href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder::AbstractGridder</a></div><div class="ttdeci">AbstractGridder(int VolumeSize, int numCoordAxes, float interpFactor, int extraPadding)</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8cpp_source.html#l00003">AbstractGridder.cpp:3</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76a8540b918f695aaf5649dc58a86d4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gpuGridder::~gpuGridder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00097">97</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{ FreeMemory(); };</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3a4eb3efb6fdc4457a8048aa1a89334a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::Allocate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate required GPU memory. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00127">127</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    cudaSetDevice(this-&gt;GPU_Device);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Allocate the needed GPU memory</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// Have the GPU arrays already been allocated?</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (this-&gt;GPUArraysAllocatedFlag == <span class="keyword">false</span>)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">// Initialize the needed arrays for the gpuGridder on the GPU</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        InitializeGPUArrays();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// Initialize the CUDA streams</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        InitializeCUDAStreams();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        this-&gt;GPUArraysAllocatedFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a3a4eb3efb6fdc4457a8048aa1a89334a_icgraph.png" border="0" usemap="#classgpu_gridder_a3a4eb3efb6fdc4457a8048aa1a89334a_icgraph" alt=""/></div>
<map name="classgpu_gridder_a3a4eb3efb6fdc4457a8048aa1a89334a_icgraph" id="classgpu_gridder_a3a4eb3efb6fdc4457a8048aa1a89334a_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a76a8540b918f695aaf5649dc58a86d4f" title="gpuGridder::~gpuGridder" alt="" coords="193,5,357,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af3740086e3f9cb6558e20191122dc11c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::BackProject </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AxesOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nAxesToProcess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run back projection on some subset of the coordinate axes. AxesOffset is the number of coordinate axes from the beginning of the host array (starting at 0) while the nAxesToProcess is the number of coordinate axes to process. For example, if the host memory has 1,000 coordinate axes, and we wanted the to process axes 500 to 700 then simply set the AxesOffset to 500 and the nAxesToProcess to 200. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00307">307</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// Run the back projection on some subset of the coordinate axes (needed when using multiple GPUs)</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaSetDevice(this-&gt;GPU_Device));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;gpuGridder::BackProject() on GPU &quot;</span> &lt;&lt; this-&gt;GPU_Device &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        PrintMemoryAvailable();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// Copy the Kaiser-Bessel vector to the GPU</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    this-&gt;d_KB_Table-&gt;<a class="code" href="class_device_memory.html#a82a46f8a5d6059de72a5410248a30374">CopyToGPU</a>(this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(), this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>-&gt;<a class="code" href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">bytes</a>());</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// For compactness define the CASImgSize, CASVolSize, and ImgSize here</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">int</span> ImgSize = this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">int</span> CASImgSize = this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">int</span> CASVolSize = this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// Plan the pointer offset values</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    gpuGridder::Offsets Offsets_obj = PlanOffsetValues(AxesOffset, nAxesToProcess, this-&gt;nStreamsBP);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Reset the arrays on the device to all zeros before the back projection</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    this-&gt;d_Imgs-&gt;<a class="code" href="class_device_memory.html#ab7ae28a2432824a9ed650c2c5b2858e0">Reset</a>();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    this-&gt;d_CASImgs-&gt;<a class="code" href="class_device_memory.html#ab7ae28a2432824a9ed650c2c5b2858e0">Reset</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    this-&gt;d_CASVolume-&gt;<a class="code" href="class_device_memory.html#ab7ae28a2432824a9ed650c2c5b2858e0">Reset</a>();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    this-&gt;d_CoordAxes-&gt;<a class="code" href="class_device_memory.html#ab7ae28a2432824a9ed650c2c5b2858e0">Reset</a>();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaDeviceSynchronize());</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Offsets_obj.num_offsets; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt; 1)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;GPU: &quot;</span> &lt;&lt; this-&gt;GPU_Device &lt;&lt; <span class="stringliteral">&quot; back projection stream &quot;</span> &lt;&lt; Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; batch &quot;</span> &lt;&lt; Offsets_obj.currBatch[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; processing &quot;</span> &lt;&lt; Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt;&lt; <span class="stringliteral">&quot; axes &quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            0,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// Copy the section of gpuCoordAxes which this stream will process on the current GPU</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            this-&gt;d_CoordAxes-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCoordAxes_Stream_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.CoordAxes_CPU_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            Offsets_obj.coord_Axes_CPU_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            cudaMemcpyHostToDevice, BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> (this-&gt;RunFFTOnDevice == 0)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="comment">// Copy the CASImages from the pinned CPU array and use instead of the images array</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                this-&gt;<a class="code" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.CASImgs_CPU_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                cudaMemcpyHostToDevice,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// Reset the d_Imgs, d_CASImgs, and d_CASImgsComplex arrays back to all zeros</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                0,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                Offsets_obj.gpuImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                0,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                this-&gt;d_CASImgsComplex-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                0,</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                2 * Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="comment">// Copy the section of host images to the GPU</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                this-&gt;<a class="code" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.Imgs_CPU_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                Offsets_obj.gpuImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                cudaMemcpyHostToDevice,</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment">// Run the forward FFT to convert the pinned CPU images to CAS images (CAS type is needed for back projecting into the CAS volume)</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            this-&gt;<a class="code" href="classgpu_gridder.html#a21d66a508db669993dc47901b05a6f9b">ImgsToCASImgs</a>(</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]],</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                this-&gt;d_CASImgs-&gt;GetPointer(Offsets_obj.gpuCASImgs_Offset[i]),</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                this-&gt;d_CASImgsComplex-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[i]),</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[i]),</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="comment">// Run the back projection kernel</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="classgpu_back_project.html#a8da0a037f899e21e584332c2d160a362">gpuBackProject::RunKernel</a>(</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(),</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[i]),</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            this-&gt;d_KB_Table-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(),</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            this-&gt;d_CoordAxes-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCoordAxes_Stream_Offset[i]),</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">kerHWidth</a>,</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            CASVolSize,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            CASImgSize,</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            this-&gt;d_KB_Table-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0),</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>,</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            &amp;BP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaDeviceSynchronize());</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_aee11c5fca119f5898423c8ed7becf07c"><div class="ttname"><a href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">AbstractGridder::h_KB_Table</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_KB_Table</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00110">AbstractGridder.h:110</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ac5d76fbca301dc973de88120f4468731"><div class="ttname"><a href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">AbstractGridder::maskRadius</a></div><div class="ttdeci">float maskRadius</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00122">AbstractGridder.h:122</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aea3cafbe24ff324215c4cdae5aefa8ca"><div class="ttname"><a href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">AbstractGridder::h_CoordAxes</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00109">AbstractGridder.h:109</a></div></div>
<div class="ttc" id="classgpu_gridder_html_a21d66a508db669993dc47901b05a6f9b"><div class="ttname"><a href="classgpu_gridder.html#a21d66a508db669993dc47901b05a6f9b">gpuGridder::ImgsToCASImgs</a></div><div class="ttdeci">void ImgsToCASImgs(cudaStream_t &amp;stream, float *CASImgs, cufftComplex *CASImgsComplex, float *Imgs, int numImgs)</div><div class="ttdoc">Convert projection images to CAS images by running a forward FFT. </div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8cpp_source.html#l00520">gpuGridder.cpp:520</a></div></div>
<div class="ttc" id="class_host_memory_html_a69c64947ead0e4ba5df5cc5e0ebfbe77"><div class="ttname"><a href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">HostMemory::GetSize</a></div><div class="ttdeci">int GetSize(int dim)</div><div class="ttdoc">Function to return the length of a given dimension of the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00134">HostMemory.h:134</a></div></div>
<div class="ttc" id="class_host_memory_html_abc0014ca60e864ec0e415a754e7ff365"><div class="ttname"><a href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">HostMemory::GetPointer</a></div><div class="ttdeci">T * GetPointer()</div><div class="ttdoc">Get the pointer to the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00218">HostMemory.h:218</a></div></div>
<div class="ttc" id="gpu_error_check_8h_html_ade86afb9cd888f66fa7b9668404c1e04"><div class="ttname"><a href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a></div><div class="ttdeci">#define gpuErrorCheck(ans)</div><div class="ttdef"><b>Definition:</b> <a href="gpu_error_check_8h_source.html#l00004">gpuErrorCheck.h:4</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="classgpu_back_project_html_a8da0a037f899e21e584332c2d160a362"><div class="ttname"><a href="classgpu_back_project.html#a8da0a037f899e21e584332c2d160a362">gpuBackProject::RunKernel</a></div><div class="ttdeci">static void RunKernel(float *d_CASVolume, float *d_CASImgs, float *d_KB_Table, float *d_CoordAxes, float kerHWidth, int nAxes, int CASVolSize, int CASImgSize, int maskRadius, int KB_Table_Size, int extraPadding, cudaStream_t *stream=NULL)</div></div>
<div class="ttc" id="class_abstract_gridder_html_a18568b39490b8dcd32f5f190d4ded554"><div class="ttname"><a href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">AbstractGridder::h_CASImgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASImgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00112">AbstractGridder.h:112</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a81cf97f19b7db1f9525461fefc0bbc88"><div class="ttname"><a href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">AbstractGridder::kerHWidth</a></div><div class="ttdeci">float kerHWidth</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00138">AbstractGridder.h:138</a></div></div>
<div class="ttc" id="class_device_memory_html_a82a46f8a5d6059de72a5410248a30374"><div class="ttname"><a href="class_device_memory.html#a82a46f8a5d6059de72a5410248a30374">DeviceMemory::CopyToGPU</a></div><div class="ttdeci">void CopyToGPU(T *Array, long long int Bytes)</div><div class="ttdoc">Copy an array array from the CPU to the previously allocated array on the GPU. </div><div class="ttdef"><b>Definition:</b> <a href="_device_memory_8h_source.html#l00096">DeviceMemory.h:96</a></div></div>
<div class="ttc" id="class_device_memory_html_ab7ae28a2432824a9ed650c2c5b2858e0"><div class="ttname"><a href="class_device_memory.html#ab7ae28a2432824a9ed650c2c5b2858e0">DeviceMemory::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdoc">Reset the GPU array back to all zeros. </div><div class="ttdef"><b>Definition:</b> <a href="_device_memory_8h_source.html#l00210">DeviceMemory.h:210</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a74d47b32a562dd9cfd841f1cef1ba72d"><div class="ttname"><a href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">AbstractGridder::extraPadding</a></div><div class="ttdeci">int extraPadding</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00128">AbstractGridder.h:128</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8e761d95420dbaa1d500e0a09cc5fa9e"><div class="ttname"><a href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">AbstractGridder::h_Imgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Imgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00107">AbstractGridder.h:107</a></div></div>
<div class="ttc" id="classgpu_gridder_html_aeff5f79de9565df5eee66bdb362f03b6"><div class="ttname"><a href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">gpuGridder::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8h_source.html#l00223">gpuGridder.h:223</a></div></div>
<div class="ttc" id="class_host_memory_html_a130d698311a9b3782c02501d51b27ea4"><div class="ttname"><a href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">HostMemory::bytes</a></div><div class="ttdeci">long long int bytes()</div><div class="ttdoc">Function to return the number of bytes the array is. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00100">HostMemory.h:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba2c3dce164f6b787104a96d0b6ca30c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::CASVolumeToVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the CASVolume to volume by running an inverse FFT. This function does not normalize using the plane density. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_aba2c3dce164f6b787104a96d0b6ca30c_icgraph.png" border="0" usemap="#classgpu_gridder_aba2c3dce164f6b787104a96d0b6ca30c_icgraph" alt=""/></div>
<map name="classgpu_gridder_aba2c3dce164f6b787104a96d0b6ca30c_icgraph" id="classgpu_gridder_aba2c3dce164f6b787104a96d0b6ca30c_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="277,5,485,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a36b4533f6adf806d9d7bbfff167f1a74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::CopyCASVolumeToHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the CAS volume array from the GPU back to the pinned host (i.e. CPU) memory. This is needed if running the Fourier transform on the CPU (such as within Matlab or Python). </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00014">14</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;{</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="comment">// Copy the CAS volume from the GPU to pinned CPU memory</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    this-&gt;d_CASVolume-&gt;<a class="code" href="class_device_memory.html#a6bbf7f29f8406955cf7456851a114fcc">CopyFromGPU</a>(this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(), this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">bytes</a>());</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="class_host_memory_html_abc0014ca60e864ec0e415a754e7ff365"><div class="ttname"><a href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">HostMemory::GetPointer</a></div><div class="ttdeci">T * GetPointer()</div><div class="ttdoc">Get the pointer to the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00218">HostMemory.h:218</a></div></div>
<div class="ttc" id="class_device_memory_html_a6bbf7f29f8406955cf7456851a114fcc"><div class="ttname"><a href="class_device_memory.html#a6bbf7f29f8406955cf7456851a114fcc">DeviceMemory::CopyFromGPU</a></div><div class="ttdeci">void CopyFromGPU(T *Array, long long int Bytes)</div><div class="ttdoc">Copy the array from the GPU to a previously allocated array on the host (i.e. CPU). </div><div class="ttdef"><b>Definition:</b> <a href="_device_memory_8h_source.html#l00138">DeviceMemory.h:138</a></div></div>
<div class="ttc" id="class_host_memory_html_a130d698311a9b3782c02501d51b27ea4"><div class="ttname"><a href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">HostMemory::bytes</a></div><div class="ttdeci">long long int bytes()</div><div class="ttdoc">Function to return the number of bytes the array is. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00100">HostMemory.h:100</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a36b4533f6adf806d9d7bbfff167f1a74_icgraph.png" border="0" usemap="#classgpu_gridder_a36b4533f6adf806d9d7bbfff167f1a74_icgraph" alt=""/></div>
<map name="classgpu_gridder_a36b4533f6adf806d9d7bbfff167f1a74_icgraph" id="classgpu_gridder_a36b4533f6adf806d9d7bbfff167f1a74_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="249,13,457,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a457eb442edc4dcf67670f7af4b7d94b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::CopyVolumeToHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the volume array from the GPU back to the pinned host (i.e. CPU) memory. This is used to return the output of the back projection. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a457eb442edc4dcf67670f7af4b7d94b0_icgraph.png" border="0" usemap="#classgpu_gridder_a457eb442edc4dcf67670f7af4b7d94b0_icgraph" alt=""/></div>
<map name="classgpu_gridder_a457eb442edc4dcf67670f7af4b7d94b0_icgraph" id="classgpu_gridder_a457eb442edc4dcf67670f7af4b7d94b0_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="264,5,472,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae11f5283443a948896f1c48b6dd7c577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::ForwardProject </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AxesOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nAxesToProcess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run forward projection on some subset of the coordinate axes. AxesOffset is the number of coordinate axes from the beginning of the host array (starting at 0) while the nAxesToProcess is the number of coordinate axes to process. For example, if the host memory has 1,000 coordinate axes, and we wanted the to process axes 500 to 700 then simply set the AxesOffset to 500 and the nAxesToProcess to 200. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00180">180</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// Run the forward projection on some subset of the coordinate axes (needed when using multiple GPUs)</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    cudaSetDevice(this-&gt;GPU_Device);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;gpuGridder::ForwardProject() on GPU &quot;</span> &lt;&lt; this-&gt;GPU_Device &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        PrintMemoryAvailable();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    this-&gt;d_KB_Table-&gt;<a class="code" href="class_device_memory.html#a82a46f8a5d6059de72a5410248a30374">CopyToGPU</a>(this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(), this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>-&gt;<a class="code" href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">bytes</a>());</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Copy the CAS volume to the corresponding GPU array</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    this-&gt;d_CASVolume-&gt;<a class="code" href="class_device_memory.html#a82a46f8a5d6059de72a5410248a30374">CopyToGPU</a>(this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(), this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">bytes</a>());</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// Check the error flags to see if we had any issues during the initilization</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">ErrorFlag</a> == 1 ||</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">GetErrorFlag</a>() == 1 ||</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">GetErrorFlag</a>() == 1 ||</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">GetErrorFlag</a>() == 1 ||</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        this-&gt;d_CoordAxes-&gt;<a class="code" href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">GetErrorFlag</a>() == 1 ||</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        this-&gt;d_KB_Table-&gt;<a class="code" href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">GetErrorFlag</a>() == 1)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error during initialization.&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// Don&#39;t run the kernel and return</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// For compactness define the CASImgSize, CASVolSize, and ImgSize here</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">int</span> ImgSize = this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">int</span> CASImgSize = this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">int</span> CASVolSize = this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// Plan the pointer offset values</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    gpuGridder::Offsets Offsets_obj = PlanOffsetValues(AxesOffset, nAxesToProcess, this-&gt;nStreamsFP);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Offsets_obj.num_offsets; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;GPU: &quot;</span> &lt;&lt; this-&gt;GPU_Device &lt;&lt; <span class="stringliteral">&quot; forward projection stream &quot;</span> &lt;&lt; Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; batch &quot;</span> &lt;&lt; Offsets_obj.currBatch[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; processing &quot;</span> &lt;&lt; Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt;&lt; <span class="stringliteral">&quot; axes&quot;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; running FFT on device &quot;</span> &lt;&lt; this-&gt;RunFFTOnDevice &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span> (Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt; 1)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// Reset the d_CASImgs and d_Imgs arrays back to zeros</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            0,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            0,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            Offsets_obj.gpuImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Copy the section of gpuCoordAxes which this stream will process on the current GPU</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            this-&gt;d_CoordAxes-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCoordAxes_Stream_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.CoordAxes_CPU_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            Offsets_obj.coord_Axes_CPU_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            cudaMemcpyHostToDevice, FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">// Run the forward projection kernel</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="classgpu_forward_project.html#a9f89c0e6fb70e14192b3efddc2c96ec1">gpuForwardProject::RunKernel</a>(</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(),</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            this-&gt;d_KB_Table-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(),</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            this-&gt;d_CoordAxes-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCoordAxes_Stream_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">kerHWidth</a>,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            CASVolSize,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            CASImgSize,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>,</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            this-&gt;<a class="code" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            this-&gt;d_KB_Table-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0),</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            &amp;FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (this-&gt;RunFFTOnDevice == 0 || this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// Copy the resulting CAS images back to the host pinned memory (CPU)</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                this-&gt;<a class="code" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.CASImgs_CPU_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                cudaMemcpyDeviceToHost,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// If running the inverse FFT on the device</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> (this-&gt;RunFFTOnDevice == 1)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// Reset the d_CASImgsComplex array back to zeros</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemsetAsync(</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                this-&gt;d_CASImgsComplex-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                0,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                2 * Offsets_obj.gpuCASImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], <span class="comment">// cufftComplex type so multiply the bytes by 2</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// Convert the CAS projection images back to images using an inverse FFT and cropping out the zero padding</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            this-&gt;CASImgsToImgs(</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]],</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                this-&gt;d_CASImgs-&gt;GetPointer(Offsets_obj.gpuCASImgs_Offset[i]),</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[i]),</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                Offsets_obj.numAxesPerStream[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                this-&gt;d_CASImgsComplex-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuCASImgs_Offset[i]));</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="comment">// Lastly, copy the resulting cropped projection images back to the host pinned memory (CPU)</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaMemcpyAsync(</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                this-&gt;<a class="code" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.Imgs_CPU_Offset[i]),</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>(Offsets_obj.gpuImgs_Offset[i]),</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                Offsets_obj.gpuImgs_streamBytes[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                cudaMemcpyDeviceToHost,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                FP_streams[Offsets_obj.stream_ID[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]));</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_aee11c5fca119f5898423c8ed7becf07c"><div class="ttname"><a href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">AbstractGridder::h_KB_Table</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_KB_Table</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00110">AbstractGridder.h:110</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ac5d76fbca301dc973de88120f4468731"><div class="ttname"><a href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">AbstractGridder::maskRadius</a></div><div class="ttdeci">float maskRadius</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00122">AbstractGridder.h:122</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aea3cafbe24ff324215c4cdae5aefa8ca"><div class="ttname"><a href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">AbstractGridder::h_CoordAxes</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00109">AbstractGridder.h:109</a></div></div>
<div class="ttc" id="class_host_memory_html_a69c64947ead0e4ba5df5cc5e0ebfbe77"><div class="ttname"><a href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">HostMemory::GetSize</a></div><div class="ttdeci">int GetSize(int dim)</div><div class="ttdoc">Function to return the length of a given dimension of the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00134">HostMemory.h:134</a></div></div>
<div class="ttc" id="class_host_memory_html_abc0014ca60e864ec0e415a754e7ff365"><div class="ttname"><a href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">HostMemory::GetPointer</a></div><div class="ttdeci">T * GetPointer()</div><div class="ttdoc">Get the pointer to the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00218">HostMemory.h:218</a></div></div>
<div class="ttc" id="gpu_error_check_8h_html_ade86afb9cd888f66fa7b9668404c1e04"><div class="ttname"><a href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a></div><div class="ttdeci">#define gpuErrorCheck(ans)</div><div class="ttdef"><b>Definition:</b> <a href="gpu_error_check_8h_source.html#l00004">gpuErrorCheck.h:4</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ad61eca9a9f8b29a703690c8bd4020627"><div class="ttname"><a href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">AbstractGridder::ErrorFlag</a></div><div class="ttdeci">bool ErrorFlag</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00116">AbstractGridder.h:116</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a18568b39490b8dcd32f5f190d4ded554"><div class="ttname"><a href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">AbstractGridder::h_CASImgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASImgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00112">AbstractGridder.h:112</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a81cf97f19b7db1f9525461fefc0bbc88"><div class="ttname"><a href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">AbstractGridder::kerHWidth</a></div><div class="ttdeci">float kerHWidth</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00138">AbstractGridder.h:138</a></div></div>
<div class="ttc" id="classgpu_forward_project_html_a9f89c0e6fb70e14192b3efddc2c96ec1"><div class="ttname"><a href="classgpu_forward_project.html#a9f89c0e6fb70e14192b3efddc2c96ec1">gpuForwardProject::RunKernel</a></div><div class="ttdeci">static void RunKernel(float *d_CASVolume, float *d_CASImgs, float *d_KB_Table, float *d_CoordAxes, float kerHWidth, int nAxes, int CASVolSize, int CASImgSize, int extraPadding, int maskRadius, int KB_Table_Size, cudaStream_t *stream=NULL)</div></div>
<div class="ttc" id="class_device_memory_html_a82a46f8a5d6059de72a5410248a30374"><div class="ttname"><a href="class_device_memory.html#a82a46f8a5d6059de72a5410248a30374">DeviceMemory::CopyToGPU</a></div><div class="ttdeci">void CopyToGPU(T *Array, long long int Bytes)</div><div class="ttdoc">Copy an array array from the CPU to the previously allocated array on the GPU. </div><div class="ttdef"><b>Definition:</b> <a href="_device_memory_8h_source.html#l00096">DeviceMemory.h:96</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a74d47b32a562dd9cfd841f1cef1ba72d"><div class="ttname"><a href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">AbstractGridder::extraPadding</a></div><div class="ttdeci">int extraPadding</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00128">AbstractGridder.h:128</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8e761d95420dbaa1d500e0a09cc5fa9e"><div class="ttname"><a href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">AbstractGridder::h_Imgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Imgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00107">AbstractGridder.h:107</a></div></div>
<div class="ttc" id="classgpu_gridder_html_aeff5f79de9565df5eee66bdb362f03b6"><div class="ttname"><a href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">gpuGridder::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8h_source.html#l00223">gpuGridder.h:223</a></div></div>
<div class="ttc" id="class_host_memory_html_a381f0bac29b4d231e7feb1c9407f8e0b"><div class="ttname"><a href="class_host_memory.html#a381f0bac29b4d231e7feb1c9407f8e0b">HostMemory::GetErrorFlag</a></div><div class="ttdeci">bool GetErrorFlag()</div><div class="ttdoc">Get the status of the error flag. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00243">HostMemory.h:243</a></div></div>
<div class="ttc" id="class_host_memory_html_a130d698311a9b3782c02501d51b27ea4"><div class="ttname"><a href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">HostMemory::bytes</a></div><div class="ttdeci">long long int bytes()</div><div class="ttdoc">Function to return the number of bytes the array is. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00100">HostMemory.h:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2daeb6521f3235460e15b19e440df458"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float * gpuGridder::GetCASVolumeFromDevice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the GPU volume array back to the host (i.e. CPU) and return the pointer to the new host array. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00020">20</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    cudaSetDevice(this-&gt;GPU_Device);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    cudaDeviceSynchronize();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="_c_a_s_to_complex_test_8m.html#ab14ce89a06368a3ce058dbccb2ce3076">CASVolume</a> = <span class="keyword">new</span> <span class="keywordtype">float</span>[this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">length</a>()];</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    this-&gt;d_CASVolume-&gt;<a class="code" href="class_device_memory.html#a6bbf7f29f8406955cf7456851a114fcc">CopyFromGPU</a>(CASVolume, this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">bytes</a>());</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    cudaDeviceSynchronize();</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_c_a_s_to_complex_test_8m.html#ab14ce89a06368a3ce058dbccb2ce3076">CASVolume</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div><div class="ttc" id="_c_a_s_to_complex_test_8m_html_ab14ce89a06368a3ce058dbccb2ce3076"><div class="ttname"><a href="_c_a_s_to_complex_test_8m.html#ab14ce89a06368a3ce058dbccb2ce3076">CASVolume</a></div><div class="ttdeci">CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_c_a_s_to_complex_test_8m_source.html#l00007">CASToComplexTest.m:7</a></div></div>
<div class="ttc" id="class_device_memory_html_a6bbf7f29f8406955cf7456851a114fcc"><div class="ttname"><a href="class_device_memory.html#a6bbf7f29f8406955cf7456851a114fcc">DeviceMemory::CopyFromGPU</a></div><div class="ttdeci">void CopyFromGPU(T *Array, long long int Bytes)</div><div class="ttdoc">Copy the array from the GPU to a previously allocated array on the host (i.e. CPU). </div><div class="ttdef"><b>Definition:</b> <a href="_device_memory_8h_source.html#l00138">DeviceMemory.h:138</a></div></div>
<div class="ttc" id="class_host_memory_html_a818c7599dad399c2918ac3ad849481be"><div class="ttname"><a href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">HostMemory::length</a></div><div class="ttdeci">long long int length()</div><div class="ttdoc">Function to return the array length (i.e. the number of elements of the array). </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00121">HostMemory.h:121</a></div></div>
<div class="ttc" id="class_host_memory_html_a130d698311a9b3782c02501d51b27ea4"><div class="ttname"><a href="class_host_memory.html#a130d698311a9b3782c02501d51b27ea4">HostMemory::bytes</a></div><div class="ttdeci">long long int bytes()</div><div class="ttdoc">Function to return the number of bytes the array is. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00100">HostMemory.h:100</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a2daeb6521f3235460e15b19e440df458_icgraph.png" border="0" usemap="#classgpu_gridder_a2daeb6521f3235460e15b19e440df458_icgraph" alt=""/></div>
<map name="classgpu_gridder_a2daeb6521f3235460e15b19e440df458_icgraph" id="classgpu_gridder_a2daeb6521f3235460e15b19e440df458_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="240,13,448,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2b28906d7236f68e1011c60315ce4157"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float * gpuGridder::GetCASVolumePtr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the pointer to the volume array on the GPU. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00008">8</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;{</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="comment">// Return the pointer to the CAS volume (needed for adding the volumes from all GPUs together for the volume reconstruction)</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <span class="keywordflow">return</span> this-&gt;d_CASVolume-&gt;<a class="code" href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">GetPointer</a>();</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;}</div><div class="ttc" id="class_host_memory_html_abc0014ca60e864ec0e415a754e7ff365"><div class="ttname"><a href="class_host_memory.html#abc0014ca60e864ec0e415a754e7ff365">HostMemory::GetPointer</a></div><div class="ttdeci">T * GetPointer()</div><div class="ttdoc">Get the pointer to the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00218">HostMemory.h:218</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a2b28906d7236f68e1011c60315ce4157_icgraph.png" border="0" usemap="#classgpu_gridder_a2b28906d7236f68e1011c60315ce4157_icgraph" alt=""/></div>
<map name="classgpu_gridder_a2b28906d7236f68e1011c60315ce4157_icgraph" id="classgpu_gridder_a2b28906d7236f68e1011c60315ce4157_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="256,5,464,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a21d66a508db669993dc47901b05a6f9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::ImgsToCASImgs </td>
          <td>(</td>
          <td class="paramtype">cudaStream_t &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>CASImgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cufftComplex *&#160;</td>
          <td class="paramname"><em>CASImgsComplex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>Imgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numImgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert projection images to CAS images by running a forward FFT. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00520">520</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;{</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// Convert projection images to CAS images by running a forward FFT</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// CASImgs, Imgs, and CASImgsComplex, are the device allocated arrays (e.g. d_CASImgs) at some offset from the beginning of the array</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">verbose</a> == <span class="keyword">true</span>)</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;gpuGridder::ImgsToCASImgs() on GPU &quot;</span> &lt;&lt; this-&gt;GPU_Device &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        PrintMemoryAvailable();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordtype">int</span> CASImgSize = this-&gt;d_CASImgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">int</span> ImgSize = this-&gt;d_Imgs-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Has the forward FFT been planned? If not create one now</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (this-&gt;forwardFFTImagesFlag == <span class="keyword">false</span>)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        cufftPlan2d(&amp;this-&gt;forwardFFTImages, CASImgSize, CASImgSize, CUFFT_C2C);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        this-&gt;forwardFFTImagesFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">// First pad the Imgs with zeros to be the same size as CASImgs</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    std::unique_ptr&lt;PadVolumeFilter&gt; PadFilter(<span class="keyword">new</span> <a class="code" href="class_pad_volume_filter.html">PadVolumeFilter</a>());</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    PadFilter-&gt;SetInput(Imgs);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    PadFilter-&gt;SetOutput(CASImgs);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    PadFilter-&gt;SetInputSize(ImgSize);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    PadFilter-&gt;SetPaddingX((CASImgSize - ImgSize) / 2);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    PadFilter-&gt;SetPaddingY((CASImgSize - ImgSize) / 2);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    PadFilter-&gt;SetPaddingZ(0);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    PadFilter-&gt;SetNumberOfSlices(numImgs);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    PadFilter-&gt;Update(&amp;stream);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// Convert the images to complex cufft type</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    std::unique_ptr&lt;RealToComplexFilter&gt; RealFilter(<span class="keyword">new</span> <a class="code" href="class_real_to_complex_filter.html">RealToComplexFilter</a>());</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    RealFilter-&gt;SetRealInput(CASImgs);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    RealFilter-&gt;SetComplexOutput(CASImgsComplex);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    RealFilter-&gt;SetVolumeSize(CASImgSize);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    RealFilter-&gt;SetNumberOfSlices(numImgs);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    RealFilter-&gt;Update(&amp;stream);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// Run FFTShift on each 2D slice</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    std::unique_ptr&lt;FFTShift2DFilter&lt;cufftComplex&gt;&gt; FFTShiftFilter(<span class="keyword">new</span> <a class="code" href="class_f_f_t_shift2_d_filter.html">FFTShift2DFilter&lt;cufftComplex&gt;</a>());</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    FFTShiftFilter-&gt;SetInput(CASImgsComplex);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    FFTShiftFilter-&gt;SetImageSize(CASImgSize);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    FFTShiftFilter-&gt;SetNumberOfSlices(numImgs);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    FFTShiftFilter-&gt;Update(&amp;stream);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// Set the FFT plan to the current stream to process</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    cufftSetStream(this-&gt;forwardFFTImages, stream);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// Execute the forward FFT on each 2D array</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// cufftPlanMany is not feasible since the number of images changes and</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// cufftDestroy blocks the CPU and causes memory leaks if not called</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// FFT on each 2D slice has similar computation speed as cufftPlanMany</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; numImgs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        cufftExecC2C(this-&gt;forwardFFTImages,</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                     &amp;CASImgsComplex[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> * CASImgSize * CASImgSize],</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                     &amp;CASImgsComplex[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> * CASImgSize * CASImgSize],</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                     CUFFT_FORWARD);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// Run the 2D FFTShift again</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    FFTShiftFilter-&gt;SetInput(CASImgsComplex);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    FFTShiftFilter-&gt;SetImageSize(CASImgSize);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    FFTShiftFilter-&gt;SetNumberOfSlices(numImgs);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    FFTShiftFilter-&gt;Update(&amp;stream);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// Convert the complex result of the forward FFT to a CAS img type</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    std::unique_ptr&lt;ComplexToCASFilter&gt; ComplexToCAS(<span class="keyword">new</span> <a class="code" href="class_complex_to_c_a_s_filter.html">ComplexToCASFilter</a>());</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    ComplexToCAS-&gt;SetComplexInput(CASImgsComplex);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    ComplexToCAS-&gt;SetCASVolumeOutput(CASImgs);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    ComplexToCAS-&gt;SetVolumeSize(CASImgSize);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    ComplexToCAS-&gt;SetNumberOfSlices(numImgs);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    ComplexToCAS-&gt;Update(&amp;stream);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="ttc" id="class_real_to_complex_filter_html"><div class="ttname"><a href="class_real_to_complex_filter.html">RealToComplexFilter</a></div><div class="ttdoc">A filter for converting an array to cufftComplex type. </div><div class="ttdef"><b>Definition:</b> <a href="_real_to_complex_filter_8h_source.html#l00019">RealToComplexFilter.h:19</a></div></div>
<div class="ttc" id="class_pad_volume_filter_html"><div class="ttname"><a href="class_pad_volume_filter.html">PadVolumeFilter</a></div><div class="ttdoc">A filter for zero padding a GPU array. </div><div class="ttdef"><b>Definition:</b> <a href="_pad_volume_filter_8h_source.html#l00018">PadVolumeFilter.h:18</a></div></div>
<div class="ttc" id="class_host_memory_html_a69c64947ead0e4ba5df5cc5e0ebfbe77"><div class="ttname"><a href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">HostMemory::GetSize</a></div><div class="ttdeci">int GetSize(int dim)</div><div class="ttdoc">Function to return the length of a given dimension of the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00134">HostMemory.h:134</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_f_f_t_shift2_d_filter_html"><div class="ttname"><a href="class_f_f_t_shift2_d_filter.html">FFTShift2DFilter</a></div><div class="ttdoc">A filter for 2D FFT shift on a GPU array. </div><div class="ttdef"><b>Definition:</b> <a href="_f_f_t_shift2_d_filter_8h_source.html#l00018">FFTShift2DFilter.h:18</a></div></div>
<div class="ttc" id="class_complex_to_c_a_s_filter_html"><div class="ttname"><a href="class_complex_to_c_a_s_filter.html">ComplexToCASFilter</a></div><div class="ttdoc">A filter for converting a cufftComplex GPU array to CAS type. </div><div class="ttdef"><b>Definition:</b> <a href="_complex_to_c_a_s_filter_8h_source.html#l00019">ComplexToCASFilter.h:19</a></div></div>
<div class="ttc" id="classgpu_gridder_html_aeff5f79de9565df5eee66bdb362f03b6"><div class="ttname"><a href="classgpu_gridder.html#aeff5f79de9565df5eee66bdb362f03b6">gpuGridder::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8h_source.html#l00223">gpuGridder.h:223</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a21d66a508db669993dc47901b05a6f9b_icgraph.png" border="0" usemap="#classgpu_gridder_a21d66a508db669993dc47901b05a6f9b_icgraph" alt=""/></div>
<map name="classgpu_gridder_a21d66a508db669993dc47901b05a6f9b_icgraph" id="classgpu_gridder_a21d66a508db669993dc47901b05a6f9b_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#af3740086e3f9cb6558e20191122dc11c" title="gpuGridder::BackProject" alt="" coords="248,5,412,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e4e7f3ef31f51e504cf20d5c3c1b05a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::ReconstructVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reconstruct the volume by converting the CASVolume to Volume and running an inverse FFT. This volume is normalized by the plane density array and the Kaiser Bessel pre-compensation array. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_a9e4e7f3ef31f51e504cf20d5c3c1b05a_icgraph.png" border="0" usemap="#classgpu_gridder_a9e4e7f3ef31f51e504cf20d5c3c1b05a_icgraph" alt=""/></div>
<map name="classgpu_gridder_a9e4e7f3ef31f51e504cf20d5c3c1b05a_icgraph" id="classgpu_gridder_a9e4e7f3ef31f51e504cf20d5c3c1b05a_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="261,5,469,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af960a33291f2c084ecfb1eb8ca4702d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::SetGPU </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>GPU_Device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the GPU device number starting at 0. For example, if a computer has 4 GPUs the GPU_Device number could be 0, 1, 2, or 3 and determines which GPU to use for processing. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8cpp_source.html#l00033">33</a> of file <a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// Set which GPU to use</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// Check how many GPUs there are on the computer</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">int</span> numGPUDetected;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaGetDeviceCount(&amp;numGPUDetected));</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Check wether the given GPU_Device value is valid</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">if</span> (GPU_Device &lt; 0 || GPU_Device &gt;= numGPUDetected) <span class="comment">//  An invalid numGPUs selection was chosen</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;GPU_Device number provided &quot;</span> &lt;&lt; GPU_Device &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error in GPU selection. Please provide an integer between 0 and the number of NVIDIA graphic cards on your computer. Use SetNumberGPUs() function.&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        this-&gt;<a class="code" href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">ErrorFlag</a> = 1;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    this-&gt;GPU_Device = GPU_Device;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    cudaSetDevice(this-&gt;GPU_Device);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="gpu_error_check_8h_html_ade86afb9cd888f66fa7b9668404c1e04"><div class="ttname"><a href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a></div><div class="ttdeci">#define gpuErrorCheck(ans)</div><div class="ttdef"><b>Definition:</b> <a href="gpu_error_check_8h_source.html#l00004">gpuErrorCheck.h:4</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ad61eca9a9f8b29a703690c8bd4020627"><div class="ttname"><a href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">AbstractGridder::ErrorFlag</a></div><div class="ttdeci">bool ErrorFlag</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00116">AbstractGridder.h:116</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classgpu_gridder_af960a33291f2c084ecfb1eb8ca4702d6_icgraph.png" border="0" usemap="#classgpu_gridder_af960a33291f2c084ecfb1eb8ca4702d6_icgraph" alt=""/></div>
<map name="classgpu_gridder_af960a33291f2c084ecfb1eb8ca4702d6_icgraph" id="classgpu_gridder_af960a33291f2c084ecfb1eb8ca4702d6_icgraph">
<area shape="rect" id="node2" href="classgpu_gridder.html#aa2a18f9abf19e19601e1cfbacf37c25b" title="gpuGridder::gpuGridder" alt="" coords="222,5,378,32"/>
<area shape="rect" id="node3" href="classgpu_gridder.html#a798cffcd48773dba66a89d8cc3718421" title="Set the number of CUDA streams to use for the back projection kernel. " alt="" coords="196,56,404,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a798cffcd48773dba66a89d8cc3718421"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::SetNumStreamsBP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nStreamsBP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the number of CUDA streams to use for the back projection kernel. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00116">116</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{ this-&gt;nStreamsBP = nStreamsBP; }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a012d5a68e82cfd2b1d845c98beca42ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void gpuGridder::SetNumStreamsFP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nStreamsFP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the number of CUDA streams to use for the forward projection kernel. </p>

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00113">113</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{ this-&gt;nStreamsFP = nStreamsFP; }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aeff5f79de9565df5eee66bdb362f03b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool gpuGridder::verbose</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gpu_gridder_8h_source.html#l00223">223</a> of file <a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Gridders/<a class="el" href="gpu_gridder_8h_source.html">gpuGridder.h</a></li>
<li>Gridders/<a class="el" href="gpu_gridder_8cpp_source.html">gpuGridder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 2 2020 10:18:08 for Multi-GPU Gridding by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
