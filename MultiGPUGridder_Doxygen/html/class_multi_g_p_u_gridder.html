<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Multi-GPU Gridding: MultiGPUGridder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Multi-GPU Gridding
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_multi_g_p_u_gridder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MultiGPUGridder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class for gridding on multiple GPUs.  
 <a href="class_multi_g_p_u_gridder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_multi_g_p_u_gridder_8h_source.html">MultiGPUGridder.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MultiGPUGridder:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder__inherit__graph.png" border="0" usemap="#_multi_g_p_u_gridder_inherit__map" alt="Inheritance graph"/></div>
<map name="_multi_g_p_u_gridder_inherit__map" id="_multi_g_p_u_gridder_inherit__map">
<area shape="rect" id="node2" href="class_abstract_gridder.html" title="A class for the gridder interface. " alt="" coords="9,5,123,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for MultiGPUGridder:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder__coll__graph.png" border="0" usemap="#_multi_g_p_u_gridder_coll__map" alt="Collaboration graph"/></div>
<map name="_multi_g_p_u_gridder_coll__map" id="_multi_g_p_u_gridder_coll__map">
<area shape="rect" id="node2" href="class_abstract_gridder.html" title="A class for the gridder interface. " alt="" coords="129,319,243,345"/>
<area shape="rect" id="node6" href="class_host_memory.html" title="HostMemory\&lt; float \&gt;" alt="" coords="263,140,410,167"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab8d8e277d61e45690a57c35531fcc9b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#ab8d8e277d61e45690a57c35531fcc9b6">MultiGPUGridder</a> (int VolumeSize, int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, int <a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>, int Num_GPUs, int *GPU_Devices, int RunFFTOnDevice, bool verbose=false)</td></tr>
<tr class="separator:ab8d8e277d61e45690a57c35531fcc9b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9887606ab06b20c7e3b57e1b9bfde6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d">~MultiGPUGridder</a> ()</td></tr>
<tr class="separator:ad9887606ab06b20c7e3b57e1b9bfde6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed0b3825c379ddf4ed23394c98dc5b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#a8ed0b3825c379ddf4ed23394c98dc5b5">SetNumStreamsFP</a> (int <a class="el" href="_timing_test_script_8m.html#af8cc49a3e450b2b612ce263388cf142b">nStreams</a>)</td></tr>
<tr class="memdesc:a8ed0b3825c379ddf4ed23394c98dc5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of CUDA streams to use with each GPU for the forward projection.  <a href="#a8ed0b3825c379ddf4ed23394c98dc5b5">More...</a><br /></td></tr>
<tr class="separator:a8ed0b3825c379ddf4ed23394c98dc5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7748bf56f77d005736d8e71ee9d9955a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#a7748bf56f77d005736d8e71ee9d9955a">SetNumStreamsBP</a> (int <a class="el" href="_timing_test_script_8m.html#af8cc49a3e450b2b612ce263388cf142b">nStreams</a>)</td></tr>
<tr class="memdesc:a7748bf56f77d005736d8e71ee9d9955a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of CUDA streams to use with each GPU for the back projection.  <a href="#a7748bf56f77d005736d8e71ee9d9955a">More...</a><br /></td></tr>
<tr class="separator:a7748bf56f77d005736d8e71ee9d9955a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd9be21e2fa04d2d85936a2835d730d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#acdd9be21e2fa04d2d85936a2835d730d">ForwardProject</a> ()</td></tr>
<tr class="memdesc:acdd9be21e2fa04d2d85936a2835d730d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the forward projection kernel on each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> object.  <a href="#acdd9be21e2fa04d2d85936a2835d730d">More...</a><br /></td></tr>
<tr class="separator:acdd9be21e2fa04d2d85936a2835d730d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266378f28abeb02218b28211ff4b11cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#a266378f28abeb02218b28211ff4b11cb">BackProject</a> ()</td></tr>
<tr class="memdesc:a266378f28abeb02218b28211ff4b11cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the back projection kernel on each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> object.  <a href="#a266378f28abeb02218b28211ff4b11cb">More...</a><br /></td></tr>
<tr class="separator:a266378f28abeb02218b28211ff4b11cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae1d1ad775f21d8dc5b602e3094a608"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#adae1d1ad775f21d8dc5b602e3094a608">CASVolumeToVolume</a> ()</td></tr>
<tr class="memdesc:adae1d1ad775f21d8dc5b602e3094a608"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combine the CAS volumes on all the GPUs (the result from the back projection) and convert to volume using the first GPU and <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a>.  <a href="#adae1d1ad775f21d8dc5b602e3094a608">More...</a><br /></td></tr>
<tr class="separator:adae1d1ad775f21d8dc5b602e3094a608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4118494a3b10b521e55bd3e6e803914f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#a4118494a3b10b521e55bd3e6e803914f">SumCASVolumes</a> ()</td></tr>
<tr class="memdesc:a4118494a3b10b521e55bd3e6e803914f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the CAS volume arrays from each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a>, sum them together, and copy the result back to the host memory.  <a href="#a4118494a3b10b521e55bd3e6e803914f">More...</a><br /></td></tr>
<tr class="separator:a4118494a3b10b521e55bd3e6e803914f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d3abc9ecf444edd29f12cb1a00ead5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multi_g_p_u_gridder.html#a07d3abc9ecf444edd29f12cb1a00ead5">AddCASVolumes</a> (int GPU_For_Reconstruction)</td></tr>
<tr class="memdesc:a07d3abc9ecf444edd29f12cb1a00ead5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sum the CAS volumes from each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> to the given device after running the back projection.  <a href="#a07d3abc9ecf444edd29f12cb1a00ead5">More...</a><br /></td></tr>
<tr class="separator:a07d3abc9ecf444edd29f12cb1a00ead5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:a362c95f254fbcb0460ff9325d760e5db inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder</a> (int VolumeSize, int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, int <a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>)</td></tr>
<tr class="separator:a362c95f254fbcb0460ff9325d760e5db inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc04d5f961454e5eb64ca2388a09a1de inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#afc04d5f961454e5eb64ca2388a09a1de">~AbstractGridder</a> ()</td></tr>
<tr class="separator:afc04d5f961454e5eb64ca2388a09a1de inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8aafbe850ffeb16208f656aa282a6882">ForwardProject</a> ()</td></tr>
<tr class="memdesc:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the forward projection and return the projection images.  <a href="#a8aafbe850ffeb16208f656aa282a6882">More...</a><br /></td></tr>
<tr class="separator:a8aafbe850ffeb16208f656aa282a6882 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a6d61e635d6cf3487a806e8de71449a8c">BackProject</a> ()</td></tr>
<tr class="memdesc:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the back projection and return the volume.  <a href="#a6d61e635d6cf3487a806e8de71449a8c">More...</a><br /></td></tr>
<tr class="separator:a6d61e635d6cf3487a806e8de71449a8c inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ae62be08b3628ab484cb8e352cbabb87c">ResetVolume</a> ()</td></tr>
<tr class="memdesc:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the volume to all zeros.  <a href="#ae62be08b3628ab484cb8e352cbabb87c">More...</a><br /></td></tr>
<tr class="separator:ae62be08b3628ab484cb8e352cbabb87c inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21988d979f448e243376d17b8e964a5a inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a21988d979f448e243376d17b8e964a5a">SetVolume</a> (float *<a class="el" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>, int *VolumeSize)</td></tr>
<tr class="separator:a21988d979f448e243376d17b8e964a5a inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1dbc21ea250e2d305badf62783da168 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ac1dbc21ea250e2d305badf62783da168">SetKerBesselVector</a> (float *<a class="el" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>, int *ArraySize)</td></tr>
<tr class="separator:ac1dbc21ea250e2d305badf62783da168 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188e9a4b7ea5dbd24d2ae86927b4aaf5 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a188e9a4b7ea5dbd24d2ae86927b4aaf5">SetImages</a> (float *<a class="el" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>, int *ArraySize)</td></tr>
<tr class="separator:a188e9a4b7ea5dbd24d2ae86927b4aaf5 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762bd124debb298a1e4eec68ede4e16e inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a762bd124debb298a1e4eec68ede4e16e">SetCoordAxes</a> (float *<a class="el" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>, int *ArraySize)</td></tr>
<tr class="separator:a762bd124debb298a1e4eec68ede4e16e inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc7df557de1ac1f80fcf5c55517f6af4 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#abc7df557de1ac1f80fcf5c55517f6af4">SetCASVolume</a> (float *<a class="el" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>, int *ArraySize)</td></tr>
<tr class="separator:abc7df557de1ac1f80fcf5c55517f6af4 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace00df1e6c449fef7ca1b46d29de5cdc inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ace00df1e6c449fef7ca1b46d29de5cdc">SetCASImages</a> (float *<a class="el" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>, int *ArraySize)</td></tr>
<tr class="separator:ace00df1e6c449fef7ca1b46d29de5cdc inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0c0a50459b15bad65a2dcab5484cda inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acf0c0a50459b15bad65a2dcab5484cda">SetMaxAxesToAllocate</a> (int <a class="el" href="class_abstract_gridder.html#a3afdf9b475aab966b2562a4098a6111f">MaxAxesToAllocate</a>)</td></tr>
<tr class="separator:acf0c0a50459b15bad65a2dcab5484cda inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#adbcd0d2e0a1300094d7ee1e20173d374">SetNumAxes</a> (int <a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>)</td></tr>
<tr class="memdesc:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of coordinate axes to be used in the forward and back projection.  <a href="#adbcd0d2e0a1300094d7ee1e20173d374">More...</a><br /></td></tr>
<tr class="separator:adbcd0d2e0a1300094d7ee1e20173d374 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acb53ec5dca88ced81f16e482a2d01bc5">SetInterpFactor</a> (float <a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>)</td></tr>
<tr class="memdesc:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interpolation factor for upsampling the volume for forward and inverse Fourier transform. Default is 2.  <a href="#acb53ec5dca88ced81f16e482a2d01bc5">More...</a><br /></td></tr>
<tr class="separator:acb53ec5dca88ced81f16e482a2d01bc5 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aec1dc054749090bc3f07c6a8112064d8">SetMaskRadius</a> (float <a class="el" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>)</td></tr>
<tr class="memdesc:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mask radius for forward and back projection. The default value is the volume size times interpolation factor divided by two minus one.  <a href="#aec1dc054749090bc3f07c6a8112064d8">More...</a><br /></td></tr>
<tr class="separator:aec1dc054749090bc3f07c6a8112064d8 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a830de77763928fa082f60eb324ea1336">GetNumAxes</a> ()</td></tr>
<tr class="memdesc:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of corrdinate axes.  <a href="#a830de77763928fa082f60eb324ea1336">More...</a><br /></td></tr>
<tr class="separator:a830de77763928fa082f60eb324ea1336 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a59364c30c23b2b9764d219087a54577a">GetVolume</a> ()</td></tr>
<tr class="memdesc:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the volume.  <a href="#a59364c30c23b2b9764d219087a54577a">More...</a><br /></td></tr>
<tr class="separator:a59364c30c23b2b9764d219087a54577a inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e12d39638a84317d189f19f9ecd007 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a02e12d39638a84317d189f19f9ecd007">GetVolumeHostMemory</a> ()</td></tr>
<tr class="separator:a02e12d39638a84317d189f19f9ecd007 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8a2faa19d66c5119d3e174aeb588f0d2">GetCASVolume</a> ()</td></tr>
<tr class="memdesc:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the CAS volume.  <a href="#a8a2faa19d66c5119d3e174aeb588f0d2">More...</a><br /></td></tr>
<tr class="separator:a8a2faa19d66c5119d3e174aeb588f0d2 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8beaeeccb10c84d0f9c42749db30ab04">GetMaskRadius</a> ()</td></tr>
<tr class="memdesc:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the mask radius parameter.  <a href="#a8beaeeccb10c84d0f9c42749db30ab04">More...</a><br /></td></tr>
<tr class="separator:a8beaeeccb10c84d0f9c42749db30ab04 inherit pub_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:a8e761d95420dbaa1d500e0a09cc5fa9e inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a></td></tr>
<tr class="separator:a8e761d95420dbaa1d500e0a09cc5fa9e inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b12a99ab909cec92ada5f815156de83 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a></td></tr>
<tr class="separator:a0b12a99ab909cec92ada5f815156de83 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3cafbe24ff324215c4cdae5aefa8ca inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a></td></tr>
<tr class="separator:aea3cafbe24ff324215c4cdae5aefa8ca inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee11c5fca119f5898423c8ed7becf07c inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a></td></tr>
<tr class="separator:aee11c5fca119f5898423c8ed7becf07c inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626a7d3e12f4809781b6d52ff5e1a2d5 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a></td></tr>
<tr class="separator:a626a7d3e12f4809781b6d52ff5e1a2d5 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18568b39490b8dcd32f5f190d4ded554 inherit pub_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_host_memory.html">HostMemory</a>&lt; float &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a></td></tr>
<tr class="separator:a18568b39490b8dcd32f5f190d4ded554 inherit pub_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:abe25d8b6c259f2bc895b1c51888b69f3 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#abe25d8b6c259f2bc895b1c51888b69f3">VolumeToCAS</a> ()</td></tr>
<tr class="separator:abe25d8b6c259f2bc895b1c51888b69f3 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8a70e8731e7f4973c541c7f978b4d5 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#adb8a70e8731e7f4973c541c7f978b4d5">CASToVolume</a> ()</td></tr>
<tr class="separator:adb8a70e8731e7f4973c541c7f978b4d5 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ec31b54d35759d5a6c58164f7e96b3 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a39ec31b54d35759d5a6c58164f7e96b3">SetAxes</a> (float *<a class="el" href="_multi_gridder_timing_test_8m.html#afeee088a42e300511137ea0a19154d47">coordAxes</a>, int *axesSize)</td></tr>
<tr class="separator:a39ec31b54d35759d5a6c58164f7e96b3 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69911a325fdba4a15c42c3bf61d745d4 inherit pro_methods_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a69911a325fdba4a15c42c3bf61d745d4">FreeMemory</a> ()</td></tr>
<tr class="separator:a69911a325fdba4a15c42c3bf61d745d4 inherit pro_methods_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_abstract_gridder"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_abstract_gridder')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_abstract_gridder.html">AbstractGridder</a></td></tr>
<tr class="memitem:ad61eca9a9f8b29a703690c8bd4020627 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ad61eca9a9f8b29a703690c8bd4020627">ErrorFlag</a></td></tr>
<tr class="separator:ad61eca9a9f8b29a703690c8bd4020627 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5020402671f5feba0b423ff27756236f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a5020402671f5feba0b423ff27756236f">ApplyCTFs</a></td></tr>
<tr class="separator:a5020402671f5feba0b423ff27756236f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d76fbca301dc973de88120f4468731 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a></td></tr>
<tr class="separator:ac5d76fbca301dc973de88120f4468731 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ced2e5b29dc7f66899e030e6f073c6 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a></td></tr>
<tr class="separator:aa8ced2e5b29dc7f66899e030e6f073c6 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d47b32a562dd9cfd841f1cef1ba72d inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a></td></tr>
<tr class="separator:a74d47b32a562dd9cfd841f1cef1ba72d inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afdf9b475aab966b2562a4098a6111f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a3afdf9b475aab966b2562a4098a6111f">MaxAxesToAllocate</a></td></tr>
<tr class="separator:a3afdf9b475aab966b2562a4098a6111f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0c6d2e4e86ae21425a2ab9a009654f inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a0e0c6d2e4e86ae21425a2ab9a009654f">kerSize</a></td></tr>
<tr class="separator:a0e0c6d2e4e86ae21425a2ab9a009654f inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cf97f19b7db1f9525461fefc0bbc88 inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#a81cf97f19b7db1f9525461fefc0bbc88">kerHWidth</a></td></tr>
<tr class="separator:a81cf97f19b7db1f9525461fefc0bbc88 inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0eb613edb0b7d65b2aa1925baa1eca inherit pro_attribs_class_abstract_gridder"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a></td></tr>
<tr class="separator:acf0eb613edb0b7d65b2aa1925baa1eca inherit pro_attribs_class_abstract_gridder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for gridding on multiple GPUs. </p>
<p>This class is used for forward and back projection of a volume on a multiple NVIDIA GPUs. The <a class="el" href="class_multi_g_p_u_gridder.html" title="A class for gridding on multiple GPUs. ">MultiGPUGridder</a> inherits from the AbstractClass which is used for setting and getting the host (i.e. CPU) memory pointers to the volume, coordinate axes vector, etc, and for setting various parameters such as the interpolation factor.</p>
<p>The <a class="el" href="class_multi_g_p_u_gridder.html" title="A class for gridding on multiple GPUs. ">MultiGPUGridder</a> creates a <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> object for each GPU. The <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> then does the processing for forward and back projection on the GPU it is assigned to. The <a class="el" href="class_multi_g_p_u_gridder.html" title="A class for gridding on multiple GPUs. ">MultiGPUGridder</a> class simply calculates which coordinate axes each GPU will process.</p>
<p>After the back projection is completed on all GPUs, the <a class="el" href="class_multi_g_p_u_gridder.html" title="A class for gridding on multiple GPUs. ">MultiGPUGridder</a> class will combine the results from all the GPUs to the first GPU for reconstructing the final volume. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8h_source.html#l00029">29</a> of file <a class="el" href="_multi_g_p_u_gridder_8h_source.html">MultiGPUGridder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab8d8e277d61e45690a57c35531fcc9b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MultiGPUGridder::MultiGPUGridder </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>VolumeSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numCoordAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>interpFactor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>extraPadding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Num_GPUs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>GPU_Devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>RunFFTOnDevice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="class_multi_g_p_u_gridder.html" title="A class for gridding on multiple GPUs. ">MultiGPUGridder</a> constructor. The GPU_Devices array is a vector of Num_GPUs size which contains the NVIDIA device number for the GPUs to use which ranges from 0 to the number of GPUs minus 1 on the current computer. RunFFTOnDevice is a flag to either run the forward and inverse Fourier transforms on the GPUs (value of 1) or to run them on the host (value of 0) such as within Matlab or Python. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8h_source.html#l00036">36</a> of file <a class="el" href="_multi_g_p_u_gridder_8h_source.html">MultiGPUGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                                                                                                                                                      : <a class="code" href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder</a>(VolumeSize, <a class="code" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, <a class="code" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, <a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>)</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="comment">// Check the input parameters: Number of GPUs</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="comment">// Check how many GPUs there are on the computer</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordtype">int</span> numGPUDetected;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        cudaGetDeviceCount(&amp;numGPUDetected);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">if</span> (Num_GPUs &lt;= 0 || Num_GPUs &gt; numGPUDetected)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;Number of GPUs provided &quot;</span> &lt;&lt; Num_GPUs &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;Error in number of GPUs. Please provide an integer between 0 and the number of NVIDIA graphic cards on your computer. Use SetNumberGPUs() function.&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        this-&gt;verbose = verbose;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            this-&gt;UseMultiThread = <span class="keyword">false</span>; <span class="comment">// Don&#39;t do multi-thread of verbose is on. Otherwise the std::cout messages won&#39;t appear</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            this-&gt;UseMultiThread = <span class="keyword">true</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">// Create an intance of the gpuGridder class for each GPU</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            cudaSetDevice(GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder creating gpuGridder object on GPU &quot;</span> &lt;&lt; GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="comment">// Delete any CUDA contexts on the current device (i.e. remove all memory allocations)</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            cudaDeviceReset();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="comment">//gpuGridder *gpuGridder_obj = new gpuGridder(VolumeSize, numCoordAxes, interpFactor, extraPadding,RunFFTOnDevice, GPU_Devices[i], verbose);</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            std::shared_ptr&lt;gpuGridder&gt; gpuGridder_obj(<span class="keyword">new</span> <a class="code" href="classgpu_gridder.html">gpuGridder</a>(VolumeSize, <a class="code" href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">numCoordAxes</a>, <a class="code" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a>, <a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a>,RunFFTOnDevice, GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], verbose));</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="comment">// Save the new object to the vector of gpuGridder objects</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            gpuGridder_vec.push_back(gpuGridder_obj);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// Save the number of GPUs</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        this-&gt;Num_GPUs = Num_GPUs;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">// Save the GPU device numbers      </span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        this-&gt;GPU_Devices = <span class="keyword">new</span> <span class="keywordtype">int</span>[Num_GPUs];</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            this-&gt;GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// Set the flag to false</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        this-&gt;ProjectInitializedFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        this-&gt;RunFFTOnDevice = RunFFTOnDevice;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        this-&gt;PeerAccessEnabled = <span class="keyword">false</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div><div class="ttc" id="class_abstract_gridder_html_acf0eb613edb0b7d65b2aa1925baa1eca"><div class="ttname"><a href="class_abstract_gridder.html#acf0eb613edb0b7d65b2aa1925baa1eca">AbstractGridder::numCoordAxes</a></div><div class="ttdeci">int numCoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00141">AbstractGridder.h:141</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="classgpu_gridder_html"><div class="ttname"><a href="classgpu_gridder.html">gpuGridder</a></div><div class="ttdoc">A class for gridding on the GPU. </div><div class="ttdef"><b>Definition:</b> <a href="gpu_gridder_8h_source.html#l00067">gpuGridder.h:67</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a74d47b32a562dd9cfd841f1cef1ba72d"><div class="ttname"><a href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">AbstractGridder::extraPadding</a></div><div class="ttdeci">int extraPadding</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00128">AbstractGridder.h:128</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aa8ced2e5b29dc7f66899e030e6f073c6"><div class="ttname"><a href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">AbstractGridder::interpFactor</a></div><div class="ttdeci">float interpFactor</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00125">AbstractGridder.h:125</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a362c95f254fbcb0460ff9325d760e5db"><div class="ttname"><a href="class_abstract_gridder.html#a362c95f254fbcb0460ff9325d760e5db">AbstractGridder::AbstractGridder</a></div><div class="ttdeci">AbstractGridder(int VolumeSize, int numCoordAxes, float interpFactor, int extraPadding)</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8cpp_source.html#l00003">AbstractGridder.cpp:3</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9887606ab06b20c7e3b57e1b9bfde6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MultiGPUGridder::~MultiGPUGridder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8h_source.html#l00101">101</a> of file <a class="el" href="_multi_g_p_u_gridder_8h_source.html">MultiGPUGridder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        FreeMemory();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a07d3abc9ecf444edd29f12cb1a00ead5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::AddCASVolumes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>GPU_For_Reconstruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sum the CAS volumes from each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> to the given device after running the back projection. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00376">376</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Add the CASVolume from all the GPUs to the given GPU device (without needing to copy to host memory first)</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// This is needed for reconstructing the volume after back projection</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder::AddCASVolumes()&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Using GPU &quot;</span> &lt;&lt; this-&gt;GPU_Devices[GPU_For_Reconstruction] &lt;&lt; <span class="stringliteral">&quot; for adding.&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaDeviceSynchronize());</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaSetDevice(this-&gt;GPU_Devices[GPU_For_Reconstruction]));</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    std::unique_ptr&lt;AddVolumeFilter&gt; AddFilter(<span class="keyword">new</span> <a class="code" href="class_add_volume_filter.html">AddVolumeFilter</a>());</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">int</span> CASVolumeSize = this-&gt;<a class="code" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>-&gt;<a class="code" href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">GetSize</a>(0) * this-&gt;<a class="code" href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">interpFactor</a> + this-&gt;<a class="code" href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">extraPadding</a> * 2;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (this-&gt;Num_GPUs &gt; 1)</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; this-&gt;Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">if</span> (this-&gt;GPU_Devices[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] != this-&gt;GPU_Devices[GPU_For_Reconstruction])</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                AddFilter-&gt;SetVolumeSize(CASVolumeSize);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                AddFilter-&gt;SetNumberOfSlices(CASVolumeSize);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                AddFilter-&gt;SetVolumeOne(gpuGridder_vec[GPU_For_Reconstruction]-&gt;GetCASVolumePtr());</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                AddFilter-&gt;SetVolumeTwo(gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;GetCASVolumePtr());</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                AddFilter-&gt;Update();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <a class="code" href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a>(cudaDeviceSynchronize());</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// Copy the resulting array to the pinned host memory</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    gpuGridder_vec[GPU_For_Reconstruction]-&gt;CopyCASVolumeToHost();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="ttc" id="class_host_memory_html_a69c64947ead0e4ba5df5cc5e0ebfbe77"><div class="ttname"><a href="class_host_memory.html#a69c64947ead0e4ba5df5cc5e0ebfbe77">HostMemory::GetSize</a></div><div class="ttdeci">int GetSize(int dim)</div><div class="ttdoc">Function to return the length of a given dimension of the array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00134">HostMemory.h:134</a></div></div>
<div class="ttc" id="class_add_volume_filter_html"><div class="ttname"><a href="class_add_volume_filter.html">AddVolumeFilter</a></div><div class="ttdoc">A filter for adding two GPU arrays. </div><div class="ttdef"><b>Definition:</b> <a href="_add_volume_filter_8h_source.html#l00017">AddVolumeFilter.h:17</a></div></div>
<div class="ttc" id="gpu_error_check_8h_html_ade86afb9cd888f66fa7b9668404c1e04"><div class="ttname"><a href="gpu_error_check_8h.html#ade86afb9cd888f66fa7b9668404c1e04">gpuErrorCheck</a></div><div class="ttdeci">#define gpuErrorCheck(ans)</div><div class="ttdef"><b>Definition:</b> <a href="gpu_error_check_8h_source.html#l00004">gpuErrorCheck.h:4</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a0b12a99ab909cec92ada5f815156de83"><div class="ttname"><a href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">AbstractGridder::h_Volume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Volume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00108">AbstractGridder.h:108</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a74d47b32a562dd9cfd841f1cef1ba72d"><div class="ttname"><a href="class_abstract_gridder.html#a74d47b32a562dd9cfd841f1cef1ba72d">AbstractGridder::extraPadding</a></div><div class="ttdeci">int extraPadding</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00128">AbstractGridder.h:128</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aa8ced2e5b29dc7f66899e030e6f073c6"><div class="ttname"><a href="class_abstract_gridder.html#aa8ced2e5b29dc7f66899e030e6f073c6">AbstractGridder::interpFactor</a></div><div class="ttdeci">float interpFactor</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00125">AbstractGridder.h:125</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_a07d3abc9ecf444edd29f12cb1a00ead5_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_a07d3abc9ecf444edd29f12cb1a00ead5_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_a07d3abc9ecf444edd29f12cb1a00ead5_icgraph" id="class_multi_g_p_u_gridder_a07d3abc9ecf444edd29f12cb1a00ead5_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#adae1d1ad775f21d8dc5b602e3094a608" title="Combine the CAS volumes on all the GPUs (the result from the back projection) and convert to volume u..." alt="" coords="284,53,485,94"/>
<area shape="rect" id="node3" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="533,5,769,32"/>
<area shape="rect" id="node4" href="mex_multi_g_p_u_get_volume_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="603,60,700,87"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a266378f28abeb02218b28211ff4b11cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::BackProject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the back projection kernel on each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> object. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00186">186</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Run the back projection kernel on each gpuGridder object</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Each GPU will process a subset of the coordinate axes</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// So we just need to pass an offset (in number of coordinate axes) from the beginning</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// To select the subset of axes to process</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    std::vector&lt;std::thread&gt; CPUThreads;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// Reserve space for CPU threads with one CPU thread for each GPU</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// Ensures the GPU process concurently if a CPU thread blocking CUDA API call is made</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// Such as cudaMalloc or cudaDeviceSynchronize</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        CPUThreads.reserve(Num_GPUs);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder::BackProject()&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Plan which GPU will process which coordinate axes</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    CoordinateAxesPlan AxesPlan_obj = PlanCoordinateAxes();</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// Pass the host memory pointers to each of the gpu gridder objects</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Imgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Volume = this-&gt;<a class="code" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CoordAxes = this-&gt;<a class="code" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_KB_Table = this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASVolume = this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASImgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// If this is the first time running allocate the needed GPU memory</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (this-&gt;ProjectInitializedFlag == <span class="keyword">false</span>)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetNumAxes(AxesPlan_obj.NumAxesPerGPU[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;Allocate();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        this-&gt;ProjectInitializedFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Update the mask radius parameter</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetMaskRadius(this-&gt;<a class="code" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment">// Multi thread version</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            CPUThreads.push_back(std::thread(&amp;<a class="code" href="class_abstract_gridder.html#a6d61e635d6cf3487a806e8de71449a8c">gpuGridder::BackProject</a>, gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], AxesPlan_obj.coordAxesOffset[i], AxesPlan_obj.NumAxesPerGPU[i]));</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="comment">// Single thread version</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;BackProject(AxesPlan_obj.coordAxesOffset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], AxesPlan_obj.NumAxesPerGPU[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// Join CPU threads together</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            CPUThreads[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].join();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    CPUThreads.clear();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    CPUThreads.shrink_to_fit();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_aee11c5fca119f5898423c8ed7becf07c"><div class="ttname"><a href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">AbstractGridder::h_KB_Table</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_KB_Table</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00110">AbstractGridder.h:110</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ac5d76fbca301dc973de88120f4468731"><div class="ttname"><a href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">AbstractGridder::maskRadius</a></div><div class="ttdeci">float maskRadius</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00122">AbstractGridder.h:122</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aea3cafbe24ff324215c4cdae5aefa8ca"><div class="ttname"><a href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">AbstractGridder::h_CoordAxes</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00109">AbstractGridder.h:109</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a6d61e635d6cf3487a806e8de71449a8c"><div class="ttname"><a href="class_abstract_gridder.html#a6d61e635d6cf3487a806e8de71449a8c">AbstractGridder::BackProject</a></div><div class="ttdeci">void * BackProject()</div><div class="ttdoc">Run the back projection and return the volume. </div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a0b12a99ab909cec92ada5f815156de83"><div class="ttname"><a href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">AbstractGridder::h_Volume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Volume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00108">AbstractGridder.h:108</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a18568b39490b8dcd32f5f190d4ded554"><div class="ttname"><a href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">AbstractGridder::h_CASImgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASImgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00112">AbstractGridder.h:112</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8e761d95420dbaa1d500e0a09cc5fa9e"><div class="ttname"><a href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">AbstractGridder::h_Imgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Imgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00107">AbstractGridder.h:107</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_a266378f28abeb02218b28211ff4b11cb_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_a266378f28abeb02218b28211ff4b11cb_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_a266378f28abeb02218b28211ff4b11cb_icgraph" id="class_multi_g_p_u_gridder_a266378f28abeb02218b28211ff4b11cb_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="253,5,489,32"/>
<area shape="rect" id="node3" href="mex_multi_g_p_u_back_project_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="323,56,420,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adae1d1ad775f21d8dc5b602e3094a608"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::CASVolumeToVolume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Combine the CAS volumes on all the GPUs (the result from the back projection) and convert to volume using the first GPU and <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a>. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00271">271</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Combine the CASVolume from each GPU and convert it to volume</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder::CASVolumeToVolume()&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Pass the host memory pointers to each of the gpu gridder objects</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// TO DO: is this needed?</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Imgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Volume = this-&gt;<a class="code" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CoordAxes = this-&gt;<a class="code" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_KB_Table = this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASVolume = this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASImgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Combine the CAS volume arrays from each GPU and copy back to the host</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// SumCASVolumes(); // Slower function but seems more reliable</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// This function is faster, but seems to be less reliable if we clear the gridder and remake it</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">int</span> GPU_For_Reconstruction = this-&gt;GPU_Devices[0];</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    EnablePeerAccess(GPU_For_Reconstruction);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="class_multi_g_p_u_gridder.html#a07d3abc9ecf444edd29f12cb1a00ead5">AddCASVolumes</a>(GPU_For_Reconstruction);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_aee11c5fca119f5898423c8ed7becf07c"><div class="ttname"><a href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">AbstractGridder::h_KB_Table</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_KB_Table</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00110">AbstractGridder.h:110</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aea3cafbe24ff324215c4cdae5aefa8ca"><div class="ttname"><a href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">AbstractGridder::h_CoordAxes</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00109">AbstractGridder.h:109</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a0b12a99ab909cec92ada5f815156de83"><div class="ttname"><a href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">AbstractGridder::h_Volume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Volume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00108">AbstractGridder.h:108</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a18568b39490b8dcd32f5f190d4ded554"><div class="ttname"><a href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">AbstractGridder::h_CASImgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASImgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00112">AbstractGridder.h:112</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8e761d95420dbaa1d500e0a09cc5fa9e"><div class="ttname"><a href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">AbstractGridder::h_Imgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Imgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00107">AbstractGridder.h:107</a></div></div>
<div class="ttc" id="class_multi_g_p_u_gridder_html_a07d3abc9ecf444edd29f12cb1a00ead5"><div class="ttname"><a href="class_multi_g_p_u_gridder.html#a07d3abc9ecf444edd29f12cb1a00ead5">MultiGPUGridder::AddCASVolumes</a></div><div class="ttdeci">void AddCASVolumes(int GPU_For_Reconstruction)</div><div class="ttdoc">Sum the CAS volumes from each gpuGridder to the given device after running the back projection...</div><div class="ttdef"><b>Definition:</b> <a href="_multi_g_p_u_gridder_8cpp_source.html#l00376">MultiGPUGridder.cpp:376</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_adae1d1ad775f21d8dc5b602e3094a608_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_adae1d1ad775f21d8dc5b602e3094a608_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_adae1d1ad775f21d8dc5b602e3094a608_icgraph" id="class_multi_g_p_u_gridder_adae1d1ad775f21d8dc5b602e3094a608_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="255,5,491,32"/>
<area shape="rect" id="node3" href="mex_multi_g_p_u_get_volume_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="324,56,421,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acdd9be21e2fa04d2d85936a2835d730d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::ForwardProject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the forward projection kernel on each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a> object. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00098">98</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Run the forward projection kernel on each gpuGridder object</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Each GPU will process a subset of the coordinate axes</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// So we just need to pass an offset (in number of coordinate axes) from the beginning</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// To select the subset of axes to process</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    std::vector&lt;std::thread&gt; CPUThreads;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// Reserve space for CPU threads with one CPU thread for each GPU</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">// Ensures the GPU process concurently if a CPU thread blocking CUDA API call is made</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// Such as cudaMalloc or cudaDeviceSynchronize</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        CPUThreads.reserve(Num_GPUs);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder::ForwardProject()&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Plan which GPU will process which coordinate axes</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    CoordinateAxesPlan AxesPlan_obj = PlanCoordinateAxes();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Pass the host memory pointers to each of the gpu gridder objects</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Imgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">h_Imgs</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Volume = this-&gt;<a class="code" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CoordAxes = this-&gt;<a class="code" href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">h_CoordAxes</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_KB_Table = this-&gt;<a class="code" href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">h_KB_Table</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASVolume = this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_CASImgs = this-&gt;<a class="code" href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">h_CASImgs</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// If this is the first time running allocate the needed GPU memory</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (this-&gt;ProjectInitializedFlag == <span class="keyword">false</span>)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;h_Volume = this-&gt;<a class="code" href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">h_Volume</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetNumAxes(AxesPlan_obj.NumAxesPerGPU[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;Allocate();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        this-&gt;ProjectInitializedFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// Update the mask radius parameter</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetMaskRadius(this-&gt;<a class="code" href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">maskRadius</a>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    GPU_Sync(); <span class="comment">// needed?</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">// Multi thread version</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            CPUThreads.push_back(std::thread(&amp;<a class="code" href="class_abstract_gridder.html#a8aafbe850ffeb16208f656aa282a6882">gpuGridder::ForwardProject</a>, gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], AxesPlan_obj.coordAxesOffset[i], AxesPlan_obj.NumAxesPerGPU[i]));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="comment">// Single thread version: gpuGridder_vec[i]-&gt;ForwardProject(AxesPlan_obj.coordAxesOffset[i], AxesPlan_obj.NumAxesPerGPU[i]);</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;ForwardProject(AxesPlan_obj.coordAxesOffset[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], AxesPlan_obj.NumAxesPerGPU[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (this-&gt;UseMultiThread == <span class="keyword">true</span>)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// Join CPU threads together</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            CPUThreads[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].join();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    CPUThreads.clear();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    CPUThreads.shrink_to_fit();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_aee11c5fca119f5898423c8ed7becf07c"><div class="ttname"><a href="class_abstract_gridder.html#aee11c5fca119f5898423c8ed7becf07c">AbstractGridder::h_KB_Table</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_KB_Table</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00110">AbstractGridder.h:110</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_ac5d76fbca301dc973de88120f4468731"><div class="ttname"><a href="class_abstract_gridder.html#ac5d76fbca301dc973de88120f4468731">AbstractGridder::maskRadius</a></div><div class="ttdeci">float maskRadius</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00122">AbstractGridder.h:122</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_aea3cafbe24ff324215c4cdae5aefa8ca"><div class="ttname"><a href="class_abstract_gridder.html#aea3cafbe24ff324215c4cdae5aefa8ca">AbstractGridder::h_CoordAxes</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CoordAxes</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00109">AbstractGridder.h:109</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a0b12a99ab909cec92ada5f815156de83"><div class="ttname"><a href="class_abstract_gridder.html#a0b12a99ab909cec92ada5f815156de83">AbstractGridder::h_Volume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Volume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00108">AbstractGridder.h:108</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8aafbe850ffeb16208f656aa282a6882"><div class="ttname"><a href="class_abstract_gridder.html#a8aafbe850ffeb16208f656aa282a6882">AbstractGridder::ForwardProject</a></div><div class="ttdeci">void ForwardProject()</div><div class="ttdoc">Run the forward projection and return the projection images. </div></div>
<div class="ttc" id="class_abstract_gridder_html_a18568b39490b8dcd32f5f190d4ded554"><div class="ttname"><a href="class_abstract_gridder.html#a18568b39490b8dcd32f5f190d4ded554">AbstractGridder::h_CASImgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASImgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00112">AbstractGridder.h:112</a></div></div>
<div class="ttc" id="class_abstract_gridder_html_a8e761d95420dbaa1d500e0a09cc5fa9e"><div class="ttname"><a href="class_abstract_gridder.html#a8e761d95420dbaa1d500e0a09cc5fa9e">AbstractGridder::h_Imgs</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_Imgs</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00107">AbstractGridder.h:107</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_acdd9be21e2fa04d2d85936a2835d730d_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_acdd9be21e2fa04d2d85936a2835d730d_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_acdd9be21e2fa04d2d85936a2835d730d_icgraph" id="class_multi_g_p_u_gridder_acdd9be21e2fa04d2d85936a2835d730d_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="229,5,465,32"/>
<area shape="rect" id="node3" href="mex_multi_g_p_u_forward_project_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="299,56,396,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7748bf56f77d005736d8e71ee9d9955a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::SetNumStreamsBP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nStreams</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the number of CUDA streams to use with each GPU for the back projection. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00028">28</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// Set the number of CUDA streams to use with each GPU for the back projection</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetNumStreamsBP(<a class="code" href="_multi_gridder_timing_test_8m.html#a371ef7d7d88e2475119f3b6d37596903">nStreamsBP</a>);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div><div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="_multi_gridder_timing_test_8m_html_a371ef7d7d88e2475119f3b6d37596903"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#a371ef7d7d88e2475119f3b6d37596903">nStreamsBP</a></div><div class="ttdeci">gridder nStreamsBP</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00018">MultiGridderTimingTest.m:18</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_a7748bf56f77d005736d8e71ee9d9955a_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_a7748bf56f77d005736d8e71ee9d9955a_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_a7748bf56f77d005736d8e71ee9d9955a_icgraph" id="class_multi_g_p_u_gridder_a7748bf56f77d005736d8e71ee9d9955a_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="297,5,533,32"/>
<area shape="rect" id="node3" href="mex_set_variables_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="367,56,464,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ed0b3825c379ddf4ed23394c98dc5b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::SetNumStreamsFP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nStreams</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the number of CUDA streams to use with each GPU for the forward projection. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00019">19</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">// Set the number of CUDA streams to use with each GPU for the forward projection</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;SetNumStreamsFP(<a class="code" href="_multi_gridder_timing_test_8m.html#ab5d4acec05460ab2d7535031e3ebeef0">nStreamsFP</a>);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div><div class="ttc" id="_multi_gridder_timing_test_8m_html_ab5d4acec05460ab2d7535031e3ebeef0"><div class="ttname"><a href="_multi_gridder_timing_test_8m.html#ab5d4acec05460ab2d7535031e3ebeef0">nStreamsFP</a></div><div class="ttdeci">Set the number of streams gridder nStreamsFP</div><div class="ttdef"><b>Definition:</b> <a href="_multi_gridder_timing_test_8m_source.html#l00017">MultiGridderTimingTest.m:17</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_a8ed0b3825c379ddf4ed23394c98dc5b5_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_a8ed0b3825c379ddf4ed23394c98dc5b5_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_a8ed0b3825c379ddf4ed23394c98dc5b5_icgraph" id="class_multi_g_p_u_gridder_a8ed0b3825c379ddf4ed23394c98dc5b5_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="296,5,532,32"/>
<area shape="rect" id="node3" href="mex_set_variables_8cpp.html#a6a215cbfde54f82a3ce599228fc3fce5" title="mexFunction" alt="" coords="365,56,463,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4118494a3b10b521e55bd3e6e803914f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultiGPUGridder::SumCASVolumes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the CAS volume arrays from each <a class="el" href="classgpu_gridder.html" title="A class for gridding on the GPU. ">gpuGridder</a>, sum them together, and copy the result back to the host memory. </p>

<p>Definition at line <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html#l00423">423</a> of file <a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// Get the CAS volume off each GPU and sum the arrays together within host memory</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// This function is used to get the result after the back projection</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (this-&gt;verbose == <span class="keyword">true</span>)</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;MultiGPUGridder::SumCASVolumes()&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// Temporary volume array</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">float</span> *SummedVolume = <span class="keyword">new</span> <span class="keywordtype">float</span>[this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">length</a>()];</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">length</a>(); <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        SummedVolume[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0; <span class="comment">// TO DO: replace with memset</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; Num_GPUs; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">// Get the volume from the current GPU</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordtype">float</span> *tempVolume = gpuGridder_vec[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-&gt;GetCASVolumeFromDevice();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// Add the volumes together</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">length</a>(); <a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            SummedVolume[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = SummedVolume[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] + tempVolume[<a class="code" href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keyword">delete</span>[] tempVolume;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// Copy the resulting summed volume to the pinned CPU array (if a pointer was previously provided)</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">//if (this-&gt;h_CASVolume != NULL)</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">//{</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    this-&gt;<a class="code" href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">h_CASVolume</a>-&gt;<a class="code" href="class_host_memory.html#a241bdee2d30062eacfe32eaae61a09f5">CopyArray</a>(SummedVolume);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">//}</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// Release the temporary memory</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">delete</span>[] SummedVolume;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Synchronize all of the GPUs</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    GPU_Sync();</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div><div class="ttc" id="class_abstract_gridder_html_a626a7d3e12f4809781b6d52ff5e1a2d5"><div class="ttname"><a href="class_abstract_gridder.html#a626a7d3e12f4809781b6d52ff5e1a2d5">AbstractGridder::h_CASVolume</a></div><div class="ttdeci">HostMemory&lt; float &gt; * h_CASVolume</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_gridder_8h_source.html#l00111">AbstractGridder.h:111</a></div></div>
<div class="ttc" id="_timing_test_script_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="_timing_test_script_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="_timing_test_script_8m_source.html#l00021">TimingTestScript.m:21</a></div></div>
<div class="ttc" id="class_host_memory_html_a241bdee2d30062eacfe32eaae61a09f5"><div class="ttname"><a href="class_host_memory.html#a241bdee2d30062eacfe32eaae61a09f5">HostMemory::CopyArray</a></div><div class="ttdeci">void CopyArray(T *Array)</div><div class="ttdoc">Copy the array to a second array. </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00158">HostMemory.h:158</a></div></div>
<div class="ttc" id="class_host_memory_html_a818c7599dad399c2918ac3ad849481be"><div class="ttname"><a href="class_host_memory.html#a818c7599dad399c2918ac3ad849481be">HostMemory::length</a></div><div class="ttdeci">long long int length()</div><div class="ttdoc">Function to return the array length (i.e. the number of elements of the array). </div><div class="ttdef"><b>Definition:</b> <a href="_host_memory_8h_source.html#l00121">HostMemory.h:121</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_multi_g_p_u_gridder_a4118494a3b10b521e55bd3e6e803914f_icgraph.png" border="0" usemap="#class_multi_g_p_u_gridder_a4118494a3b10b521e55bd3e6e803914f_icgraph" alt=""/></div>
<map name="class_multi_g_p_u_gridder_a4118494a3b10b521e55bd3e6e803914f_icgraph" id="class_multi_g_p_u_gridder_a4118494a3b10b521e55bd3e6e803914f_icgraph">
<area shape="rect" id="node2" href="class_multi_g_p_u_gridder.html#ad9887606ab06b20c7e3b57e1b9bfde6d" title="MultiGPUGridder::~MultiGPUGridder" alt="" coords="288,5,524,32"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Gridders/<a class="el" href="_multi_g_p_u_gridder_8h_source.html">MultiGPUGridder.h</a></li>
<li>Gridders/<a class="el" href="_multi_g_p_u_gridder_8cpp_source.html">MultiGPUGridder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 2 2020 09:41:03 for Multi-GPU Gridding by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
